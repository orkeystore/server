{"version":3,"sources":["lib/errors/HttpResponseError.ts","lib/utils/fetch.ts","constants/settings.ts","lib/api/auth/login.ts","lib/api/auth/logout.ts","lib/api/auth/me.ts","lib/api/auth/account.ts","lib/api/auth/accounts.ts","lib/api/auth/index.ts","lib/api/auth/remove.ts","lib/api/index.ts","lib/api/keys/index.ts","lib/api/keys/list.ts","lib/api/keys/create.ts","lib/api/keys/remove.ts","lib/api/keys/storage.ts","lib/api/keys/archive.ts","lib/api/keys/restore.ts","lib/api/keys/preview.ts","lib/api/keys/byIds.ts","lib/api/repos/index.ts","lib/api/repos/create.ts","lib/api/repos/list.ts","lib/api/repos/remove.ts","constants/routes.ts","constants/mainMenu.ts","containers/Session/reducer.ts","containers/Accounts/reducer.ts","constants/pager.ts","containers/Repos/reducer.ts","containers/Storage/reducer.ts","containers/Keys/reducer.ts","containers/KeyPreview/reducer.ts","containers/KeyPreview/constants.ts","reducer.ts","containers/Session/saga.ts","containers/Keys/selectors.ts","containers/Keys/saga.ts","containers/Repos/selectors.ts","containers/Repos/saga.ts","saga.ts","store.ts","theme/palette.ts","theme/typography.ts","theme/overrides/index.ts","theme/overrides/MuiTableHead.ts","theme/overrides/MuiTableCell.ts","theme/overrides/MuiCardHeader.ts","theme/index.ts","containers/Session/selectors.ts","components/TopBar/styled.ts","containers/Session/hooks.ts","components/TopBar/index.tsx","layouts/AuthLayout/styled.ts","components/Message/styles.ts","components/Message/index.tsx","components/LoginForm/styled.ts","components/LoginForm/index.tsx","layouts/AuthLayout/index.tsx","components/ExpiredSession/index.tsx","components/MainMenu/index.tsx","layouts/DashboardLayout/styled.ts","layouts/DashboardLayout/index.tsx","lib/utils/generatePassword.ts","containers/Keys/hooks.ts","components/CopyBtn/index.tsx","components/UrlsList/index.tsx","components/ApproveModal/index.tsx","components/MessageTooltip/index.tsx","components/CodeFormat/index.tsx","components/PopMenu/index.tsx","components/TextFieldWithOptions/index.tsx","containers/KeyPreview/hooks.ts","components/PrivateUrls/index.tsx","components/KeyItem/index.tsx","components/PerPageSelect/index.tsx","components/SearchInput/index.tsx","components/KeysList/index.tsx","containers/KeyPreview/selectors.ts","components/KeyPreview/index.tsx","components/KeyEntryForm/index.tsx","pages/KeysPage/index.tsx","containers/Accounts/hooks.ts","components/AccountForm/index.tsx","containers/Accounts/selectors.ts","components/AccountItem/index.tsx","components/AccountsList/index.tsx","pages/AccountsPage/index.tsx","containers/Repos/hooks.ts","components/RepoItem/index.tsx","components/ReposList/index.tsx","components/EntriesPicker/index.tsx","lib/utils/useAPIEffect.ts","components/RepositoryForm/index.tsx","pages/ReposPage/index.tsx","containers/Storage/selectors.ts","components/StorageTable/index.tsx","containers/Storage/hooks.ts","components/StorageList/index.tsx","pages/StoragePage/index.tsx","pages/ArchivePage/index.tsx","routes.tsx","components/StartScreen/styles.ts","components/StartScreen/index.tsx","components/AuthGuard/index.tsx","index.tsx"],"names":["HttpRequestError","status","message","Object","setPrototypeOf","prototype","statusCode","this","Error","headers","prop","val","input","init","url","replace","processedInput","window","fetch","credentials","res","json","data","store","dispatch","sessionActions","setSessionExpired","isExpired","params","a","fetcher","removeHeader","localStorage","removeItem","fetchJson","method","body","JSON","stringify","result","setItem","setHeader","token","isLogout","rawAuth","getItem","parse","_params","remove","deleted","account","accounts","login","logout","me","auth","keys","list","page","perPage","search","isArchived","query","qs","archived","addQueryPrefix","create","key","id","toString","storage","archive","entry","restore","preview","isByEntry","targetUrl","byIds","ids","repos","created","ROUTES","MAIN_MENU_LINKS","path","name","title","icon","isAdminOnly","pureState","isUserAuthorized","isAlreadyFetched","isSessionExpired","mainMenuLinks","errors","loginForm","reducers","setUserData","state","action","payload","Boolean","defineMenuLinks","isAdmin","filter","item","undefined","fetchLoginUser","createAsyncThunk","api","fetchMe","fetchLogout","set","createSlice","initialState","extraReducers","builder","forEach","trigger","addCase","pending","fulfilled","hosts","privateHost","private","publicHost","public","rejected","error","parsedError","includes","code","actions","reducer","fetchCreateAccount","thunkApi","fetchAccountsList","fetchRemoveAccounts","loading","test","_action","DEFAULT_PAGE_OPTIONS","items","pager","pagerOptions","toggleEditModal","isOpened","isEditModalOpened","changePager","changeSearch","fetchListRepo","fetchCreateRepo","fetchRemoveRepos","changeFilter","fetchStorageItems","edit","isModalOpened","setInitialRouteParsing","isRouteParsed","isParsed","reset","fetchCreateKey","fetchKeysList","fetchRemoveKeyItem","fetchArchiveKeyItem","fetchRestoreKeyItem","meta","arg","totalItems","toggleModal","isOpen","modal","setParams","fetchKeyPreview","_thunkApi","availFormats","label","availPrivacy","details","session","sessionReducer","keysReducer","accountsReducer","reposReducer","storageReducer","keyPreview","rootReducer","combineReducers","sagaSession","menuUpdate","fork","takeEvery","put","containerState","keysListSelector","createSelector","keysPagerSelector","keysSearchSelector","isRouteParsedSelector","keysPagerOptionsSelector","isKeyListEmpty","length","keysRequestSelector","sagaKeys","reloadKeysList","keysActions","select","type","fetchParams","targetPage","Math","max","ceil","reposListSelector","pagerSelector","searchSelector","isEmptySelector","sagaRepos","reloadReposListAfterCreationOrDeletion","reposActions","reposSelectors","isCreation","newPage","mainSaga","sagaMiddleware","createSagaMiddleware","middleware","thunk","enhancer","applyMiddleware","createStore","composeWithDevTools","run","rootSaga","initializeStore","useAppDispatch","useDispatch","white","black","primary","contrastText","dark","colors","indigo","main","light","secondary","blue","red","text","blueGrey","link","background","default","paper","divider","grey","typography","palette","h1","color","fontWeight","fontSize","letterSpacing","lineHeight","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","button","caption","overline","textTransform","MuiTableHead","root","backgroundColor","MuiTableCell","borderBottom","head","paddingTop","paddingBottom","MuiCardHeader","marginRight","marginTop","theme","createMuiTheme","overrides","host","tokenSelector","privateHostSelector","publicHostSelector","Grow","styled","div","useContainerSession","useCallback","useHooks","TopBar","user","useSelector","sessionSelectors","isLogoutAvail","AppBar","position","Toolbar","Typography","variant","Button","onClick","Wrap","BarHolder","FormHolder","Root","Paper","Message","TextWrap","Box","props","elevation","children","defaultProps","severnity","Container","Body","BodyLine","LineItem","SubmitButton","initialValues","username","password","handleSubmit","values","validate","LoginForm","serverErrors","userServerErrors","Card","CardHeader","CardContent","onSubmit","_props","field","TextField","touched","autoComplete","size","AuthLayout","ExpiredSession","Dialog","open","useStyles","makeStyles","iconWrap","maxWidth","minWidth","MainMenu","history","useHistory","mainMenu","styles","List","component","map","ListItem","push","ListItemIcon","className","Icon","ListItemText","Header","Menu","Main","DashboardLayout","route","routes","renderRoutes","generatePassword","charset","retVal","i","n","charAt","floor","random","useContainerKeys","keysSelectors","accessToken","histroy","location","useLocation","fetchKeysListWatch","fetchArchiveListWatch","requestKeysList","requestKeysByIds","resetList","routeParser","ignoreQueryPrefix","parseInt","isNaN","newEntry","routeWatcher","defaultPage","defaultPerPage","useState","isCopied","setCopied","handleCopy","inputRef","current","document","execCommand","handleCloseSnack","CopyBtn","Snackbar","anchorOrigin","horizontal","vertical","autoHideDuration","onClose","Alert","severity","IconButton","handleFocus","event","target","inputRefs","useMemo","React","createRef","padding","width","UrlsList","value","fullWidth","onFocus","InputProps","endAdornment","InputAdornment","isPrivate","ApproveModal","toggleDialog","DialogTitle","content","DialogContent","DialogActions","autoFocus","HtmlTooltip","withStyles","tooltip","pxToRem","border","Tooltip","MessageTooltip","pre","display","overflowX","height","whiteSpace","CodeFormat","menuStaticProps","transformOrigin","menu","PopMenu","keepMounted","anchorEl","handleClose","MenuItem","onSelectMenuItem","TextFieldWithOptions","currentMenuLabel","fieldProps","inputProps","disabled","setAnchorEl","beforeOptions","currentTarget","afterOptions","useContainerPreviewKey","keyPreviewActions","setPreviewParams","openKeyPreview","apiParams","previewParams","KEY_FORMATS","formatId","setFormat","format","find","keysHost","urlRef","useRef","accessRef","handleSetFormat","handleOpenPreviewModal","privacy","exampleMessage","justifyContent","PrivateUrls","Grid","container","spacing","xs","accessCode","Link","rotateInterval","publicUrls","deleteItem","archiveItem","restoreItem","rotation","moment","duration","humanize","privateWrap","marginBottom","marginLeft","opacity","codeHolder","textAlign","KeyItem","justify","Divider","Accordion","AccordionSummary","expandIcon","placement","gutterBottom","AccordionDetails","style","flexGrow","CardActions","archivedAt","onSelect","handleChange","e","PerPageSelect","options","alignItems","Select","onChange","onThrottledChange","restProps","InputPropsMemo","startAdornment","throttledChange","debounce","SearchInput","isFormOpened","handleModalToggle","handlePagerChange","_event","handleChangePerPage","handleChangeSearch","pagerHolder","searchHolder","wrap","noItems","KeysList","isEmpty","startIcon","defaultValue","placeholder","totalPages","Pagination","count","KeyPreview","keyData","keyInputRef","formatsBtnRef","privacyBtnRef","targetKey","isFormatsMenuOpen","isPrivacyMenuOpen","handleFormatsMenuClose","handleFormatsMenuOpen","handlePrivacyMenuClose","handlePrivacyMenuOpen","handleFormatsMenuItemSelect","handlePrivacyMenuItemSelect","handleDialogClose","formatString","toUpperCase","privacyString","activatesAt","unix","expiresAt","ref","copyHolder","readOnly","keyInput","KeyPreviewModal","modalState","keyPreviewSelectors","toggleFormatsMenu","togglePrivacyMenu","publicKey","privateKey","targetKeys","pem","jwk","togglePreviewModal","overflow","left","top","unitOptions","h","d","w","m","defaultInitialValues","unit","rotatable","KeyEntryForm","menuItems","formikProps","isSubmitting","textfield","el","codeMask","mask","isEnabled","setFieldValue","digitMask","FormControlLabel","control","Checkbox","checked","_","server","disableElevation","CircularProgress","progress","KeyEntryFormModal","closeModal","formikHelpers","errorResult","setErrors","Inputmask","regex","String","raw","useEffect","req","abort","KeysPage","useContainerAccounts","accountsActions","admin","AccountForm","accountsListSelector","deleteAccount","AccountItem","toggleForm","AccountsList","accountsData","AccountsPage","useContainerRepos","createNewRepo","opts","fetchListRepoWatch","deleteRepos","contentItems","contentItem","RepoItem","entries","Chip","isEditFormOpened","ReposList","repo","pickedSet","onUpdate","picked","pickItems","setOptions","pickedDetails","changePickedDetails","searchParams","useUpdatePickedSetFromProps","useGetPickedDetails","useFetchOptions","handleChangeItem","newItems","concat","handleSearchChange","s","scrollBar","topDivider","newDetails","requestTargets","func","onSuccess","onError","fetchList","onComplete","isUnmounted","then","catch","err","EntriesPicker","edge","disableRipple","RepositoryForm","keyError","RepositoryFormModal","isRepoEditModalOpened","description","keyTitle","marginBotton","paddingLeft","ReposPage","storageItems","storagePager","storageFilter","storagePagerOptions","entryName","handleOpenKeyPreview","StorageTable","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","now","expMoment","expUnix","activateMoment","activateUnix","currentStatus","isBefore","isAfter","kid","kty","alg","useContainerStorage","storageSelectors","storageActions","fetchStorageItemsWatcher","maxPage","min","handleChangeFilterEntryName","StorageList","TablePagination","rowsPerPageOptions","onChangePage","rowsPerPage","onChangeRowsPerPage","StoragePage","ArchivePage","exact","to","StartScreen","isComplete","AuthGuard","storeData","createStructuredSelector","userStateSelectors","pathname","targetNode","getElementById","createBrowserHistory","ReactDOM","render","CssBaseline","ThemeProvider"],"mappings":"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","file":"static/js/main.d5fc761a.chunk.js","sourcesContent":["export interface IHttpRequestErrorInfo {\r\n  statusCode: number;\r\n  message: string;\r\n}\r\n\r\nexport class HttpRequestError extends Error {\r\n  constructor (public status: number, public message: string) {\r\n    super(message);\r\n    Object.setPrototypeOf(this, HttpRequestError.prototype);\r\n  }\r\n\r\n  getInfo(): IHttpRequestErrorInfo {\r\n    return {\r\n      statusCode: this.status,\r\n      message: this.message,\r\n    };\r\n  }\r\n}\r\n","import 'whatwg-fetch';\r\nimport { HttpRequestError } from '../errors/HttpResponseError';\r\nimport { API_URL } from 'src/constants/settings';\r\nimport { store } from 'src/store';\r\nimport { actions as sessionActions } from 'src/containers/Session/reducer';\r\n\r\nconst targetApi = API_URL;\r\n\r\nclass AppFetcher {\r\n  headers: Record<string, string>;\r\n\r\n  constructor(headers?: Record<string, string>) {\r\n    this.headers = headers || {};\r\n  }\r\n\r\n  setHeader(prop: string, val: string) {\r\n    this.headers = {\r\n      ...this.headers,\r\n      [prop]: val\r\n    }\r\n  }\r\n\r\n  removeHeader(prop: string) {\r\n    if (this.headers) {\r\n      delete this.headers[prop];\r\n    }\r\n  }\r\n\r\n  async fetch(input: RequestInfo, init?: RequestInit): Promise<Response> {\r\n    let processedInput;\r\n\r\n    if (typeof input !== 'string') {\r\n      input.url.replace('{api}', targetApi);\r\n\r\n      processedInput = {\r\n        ...input,\r\n        url: input.url,\r\n      };\r\n    } else {\r\n      processedInput = input.replace('{api}', targetApi);\r\n    }\r\n\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      ...this.headers,\r\n      ...init?.headers,\r\n    };\r\n\r\n    return window.fetch(processedInput, {\r\n      credentials: 'include',\r\n      ...init,\r\n      headers,\r\n    });\r\n  }\r\n\r\n  async fetchJson<T>(\r\n    input: RequestInfo,\r\n    init?: RequestInit,\r\n  ): Promise<T> {\r\n    try {\r\n      const res = await this.fetch(input, init);\r\n\r\n      if (res.status < 300) {\r\n        return (await res.json()) as T;\r\n      } else {\r\n        const data = (await res.json()) as { statusCode: number; message: string };\r\n        throw new HttpRequestError(data.statusCode, data.message);\r\n      }\r\n    } catch (err) {\r\n      if (err instanceof HttpRequestError) {\r\n        switch (err.status) {\r\n          case 401:\r\n            store.dispatch(sessionActions.setSessionExpired({ isExpired: true }));\r\n            break;\r\n          default:\r\n        }\r\n      }\r\n\r\n      throw err;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new AppFetcher();\r\n","export const IS_DEV = process.env.NODE_ENV === 'development';\r\nexport const API_URL = IS_DEV ? 'http://localhost:3000' : '';\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiParamsAuthLogin, IApiResultAuthLogin } from './types';\r\n\r\nexport default async (params: IApiParamsAuthLogin): Promise<IApiResultAuthLogin> => {\r\n  fetcher.removeHeader(`Authorization`);\r\n  localStorage.removeItem('auth');\r\n\r\n  const result = await fetcher.fetchJson<IApiResultAuthLogin>(\r\n    '{api}/auth/token',\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(params)\r\n    }\r\n  );\r\n\r\n\r\n  if (result) {\r\n    localStorage.setItem('auth', JSON.stringify(result));\r\n    fetcher.setHeader(`Authorization`, `Bearer ${result.token}`);\r\n  }\r\n\r\n  return result;\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiResultAuthLogout } from './types';\r\n\r\n// eslint-disable-next-line @typescript-eslint/require-await\r\nexport default async (): Promise<IApiResultAuthLogout> => {\r\n  fetcher.removeHeader(`Authorization`);\r\n  localStorage.removeItem('auth');\r\n  return { isLogout: true }\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiResultAuthLogin } from './types';\r\nimport { HttpRequestError } from 'src/lib/errors/HttpResponseError';\r\n\r\n// eslint-disable-next-line @typescript-eslint/require-await\r\nexport default async (): Promise<IApiResultAuthLogin> => {\r\n  const rawAuth = localStorage.getItem('auth');\r\n\r\n  if (rawAuth === null) {\r\n    throw new HttpRequestError(401, 'No jwt presents')\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n  const result: IApiResultAuthLogin = JSON.parse(rawAuth);\r\n  fetcher.setHeader(`Authorization`, `Bearer ${result.token}`);\r\n\r\n  return result;\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiParamsAuthAccount, IApiResultAuthAccount } from './types';\r\n\r\nexport default async (params: IApiParamsAuthAccount): Promise<IApiResultAuthAccount | null> => {\r\n  const result = await fetcher.fetchJson<IApiResultAuthAccount>(\r\n    '{api}/auth/account',\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(params)\r\n    }\r\n  );\r\n\r\n  return result;\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiParamsAuthAccounts, IApiResultAuthAccounts } from './types';\r\n\r\nexport default async (_params?: IApiParamsAuthAccounts): Promise<IApiResultAuthAccounts> => {\r\n  const result = await fetcher.fetchJson<IApiResultAuthAccounts>(\r\n    '{api}/auth/accounts',\r\n    {\r\n      method: 'GET',\r\n    }\r\n  );\r\n\r\n  return result;\r\n};\r\n","import login from './login';\r\nimport logout from './logout';\r\nimport me from './me';\r\nimport account from './account';\r\nimport accounts from './accounts';\r\nimport remove from './remove';\r\n\r\nexport default {\r\n  remove,\r\n  account,\r\n  accounts,\r\n  login,\r\n  logout,\r\n  me,\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiResultAuthRemove, IApiParamsAuthRemove } from './types';\r\n\r\nexport default async (params: IApiParamsAuthRemove): Promise<IApiResultAuthRemove | null> => {\r\n  const result = await fetcher.fetchJson<IApiResultAuthRemove['deleted']>(\r\n    '{api}/auth/accounts',\r\n    {\r\n      method: 'DELETE',\r\n      body: JSON.stringify(params),\r\n    }\r\n  );\r\n\r\n  return result ? { deleted: result } : null;\r\n};\r\n","import auth from './auth';\r\nimport keys from './keys';\r\nimport repos from './repos';\r\n\r\nexport default {\r\n  auth,\r\n  keys,\r\n  repos,\r\n};\r\n","import list from './list';\r\nimport create from './create';\r\nimport remove from './remove';\r\nimport storage from './storage';\r\nimport archive from './archive';\r\nimport restore from './restore';\r\nimport preview from './preview';\r\nimport byIds from './byIds';\r\n\r\nexport default {\r\n  list,\r\n  create,\r\n  remove,\r\n  storage,\r\n  archive,\r\n  restore,\r\n  preview,\r\n  byIds,\r\n}\r\n","import qs from 'qs';\r\nimport fetcher from 'src/lib/utils/fetch';\r\nimport { IApiKeyEntry, IApiPager } from '../types';\r\n\r\nexport interface IApiParamsKeysList {\r\n  page?: number;\r\n  perPage?: number;\r\n  search?: string;\r\n  isArchived?: boolean;\r\n}\r\n\r\nexport interface IApiResultKeysList {\r\n  items: IApiKeyEntry[];\r\n  pager: IApiPager;\r\n}\r\n\r\nexport default async (params: IApiParamsKeysList = {}): Promise<IApiResultKeysList> => {\r\n  const { page, perPage, search, isArchived } = params;\r\n  const query = qs.stringify({ page, perPage, search, archived: isArchived ? 1 : 0 }, { addQueryPrefix: true });\r\n\r\n  const result = await fetcher.fetchJson<IApiResultKeysList>(\r\n    `{api}/entry/list${query}`,\r\n    {\r\n      method: 'GET',\r\n    }\r\n  );\r\n\r\n  return result;\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiResultKeysCreate, IApiParamsKeysCreate } from './types';\r\n\r\nexport default async (params: IApiParamsKeysCreate): Promise<IApiResultKeysCreate> => {\r\n  const result = await fetcher.fetchJson<IApiResultKeysCreate['key']>(\r\n    '{api}/entry/create',\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(params),\r\n    }\r\n  );\r\n\r\n  return { key: result };\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiParamsKeysRemove, IApiResultKeysRemove } from './types';\r\n\r\nexport default async (params: IApiParamsKeysRemove): Promise<IApiResultKeysRemove> => {\r\n  const result = await fetcher.fetchJson<IApiResultKeysRemove['deleted']>(\r\n    `{api}/entry/${params.id.toString()}`,\r\n    {\r\n      method: 'DELETE',\r\n    }\r\n  );\r\n\r\n  return { deleted: result };\r\n};\r\n","import qs from 'qs';\r\nimport fetcher from 'src/lib/utils/fetch';\r\nimport { IApiPager, IApiStorageItem } from 'src/lib/api/types';\r\n\r\nexport interface IApiParamsKeysStorage {\r\n  page?: number;\r\n  perPage?: number;\r\n  search?: string;\r\n}\r\n\r\nexport interface IApiResultKeysStorage {\r\n  items: IApiStorageItem[];\r\n  pager: IApiPager;\r\n}\r\n\r\nexport default async (params: IApiParamsKeysStorage): Promise<IApiResultKeysStorage> => {\r\n  const query = qs.stringify(params, { addQueryPrefix: true });\r\n  return await fetcher.fetchJson<IApiResultKeysStorage>(`{api}/key/storage${query}`, {\r\n    method: 'GET',\r\n  });\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiKeyEntry } from 'src/lib/api/types';\r\n\r\nexport interface IApiParamsKeysArchive {\r\n  id: number;\r\n}\r\n\r\nexport interface IApiResultKeysArchive {\r\n  entry: IApiKeyEntry;\r\n}\r\n\r\nexport default async (params: IApiParamsKeysArchive): Promise<IApiResultKeysArchive> => {\r\n  const result = await fetcher.fetchJson<IApiResultKeysArchive['entry']>(\r\n    `{api}/entry/archive/${params.id.toString()}`,\r\n    {\r\n      method: 'POST',\r\n    }\r\n  );\r\n\r\n  return { entry: result };\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiKeyEntry } from 'src/lib/api/types';\r\n\r\nexport interface IApiParamsKeysRestore {\r\n  id: number;\r\n}\r\n\r\nexport interface IApiResultKeysRestore {\r\n  entry: IApiKeyEntry;\r\n}\r\n\r\nexport default async (params: IApiParamsKeysRestore): Promise<IApiResultKeysRestore> => {\r\n  const result = await fetcher.fetchJson<IApiResultKeysRestore['entry']>(\r\n    `{api}/entry/restore/${params.id.toString()}`,\r\n    {\r\n      method: 'POST',\r\n    }\r\n  );\r\n\r\n  return { entry: result };\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiPrivateJWK, IApiPublicJWK } from '../types';\r\n\r\nexport interface IApiParamsKeysPreview {\r\n  id: number;\r\n  isByEntry?: boolean;\r\n}\r\nexport interface IApiResultKeysPreview {\r\n  publicKey: { jwk: IApiPublicJWK; pem: string };\r\n  privateKey?: { jwk: IApiPrivateJWK; pem: string };\r\n  activatesAt: number;\r\n  expiresAt: number;\r\n  entryId: number;\r\n}\r\n\r\nexport default async (params: IApiParamsKeysPreview): Promise<IApiResultKeysPreview> => {\r\n  const { id, isByEntry } = params;\r\n  const targetUrl = isByEntry ? `{api}/key/byEntry/${id.toString()}` : `{api}/key/${id.toString()}`;\r\n  return await fetcher.fetchJson<IApiResultKeysPreview>(targetUrl);\r\n};\r\n","import qs from 'qs';\r\nimport fetcher from 'src/lib/utils/fetch';\r\nimport { IApiKeyEntry } from '../types';\r\n\r\nexport interface IApiParamsKeysByIds {\r\n  ids: number[];\r\n}\r\n\r\nexport interface IApiResultKeysByIds {\r\n  items: IApiKeyEntry[];\r\n}\r\n\r\nexport default async (params: IApiParamsKeysByIds): Promise<IApiResultKeysByIds> => {\r\n  const { ids } = params;\r\n  const query = qs.stringify({ ids }, { addQueryPrefix: true });\r\n\r\n  const result = await fetcher.fetchJson<IApiResultKeysByIds>(`{api}/entry/byIds${query}`, {\r\n    method: 'GET',\r\n  });\r\n\r\n  return result;\r\n};\r\n","import { create } from './create';\r\nimport { list } from './list';\r\nimport { remove } from './remove';\r\n\r\nexport default {\r\n  create,\r\n  list,\r\n  remove,\r\n}\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiParamsReposCreate, IApiResultReposCreate } from './types';\r\n\r\nexport const create = async (\r\n  params: IApiParamsReposCreate,\r\n): Promise<IApiResultReposCreate | null> => {\r\n  const result = await fetcher.fetchJson<IApiResultReposCreate['created']>('{api}/repo/create', {\r\n    method: 'POST',\r\n    body: JSON.stringify(params),\r\n  });\r\n\r\n  return result ? { created: result } : null;\r\n};\r\n","import qs from 'qs';\r\nimport fetcher from 'src/lib/utils/fetch';\r\nimport { IApiResultReposList } from './types';\r\n\r\nexport interface IApiParamsReposList {\r\n  page?: number;\r\n  perPage?: number;\r\n}\r\nexport const list = async (params: IApiParamsReposList = {}): Promise<IApiResultReposList> => {\r\n  const query = qs.stringify(params, { addQueryPrefix: true });\r\n  const result = await fetcher.fetchJson<IApiResultReposList>(`{api}/repo/list${query}`);\r\n  return result;\r\n};\r\n","import fetcher from 'src/lib/utils/fetch';\r\nimport { IApiParamsReposRemove, IApiResultReposRemove } from './types';\r\n\r\nexport const remove = async (params: IApiParamsReposRemove): Promise<IApiResultReposRemove> => {\r\n  const result = await fetcher.fetchJson<IApiResultReposRemove['deleted']>('{api}/repo/remove', {\r\n    method: 'DELETE',\r\n    body: JSON.stringify(params),\r\n  });\r\n\r\n  return { deleted: result ? result : [] };\r\n};\r\n","export const ROUTES = {\r\n  AUTH: '/auth',\r\n  AUTH_LOGIN: '/auth/login',\r\n  DASHBOARD: '/dashboard',\r\n  DASHBOARD_SPECIES: '/dashboard/species',\r\n  ACCOUNTS: '/dashboard/accounts',\r\n  KEYS: '/dashboard/keys',\r\n  REPOS: '/dashboard/repos',\r\n  STORAGE: '/dashboard/journal',\r\n  ARCHIVE: '/dashboard/archive',\r\n}\r\n","import { ROUTES } from \"./routes\";\r\n\r\nexport const MAIN_MENU_LINKS = [\r\n  { id: 1, path: ROUTES.KEYS , name: 'keys', title: 'Active keys', icon: 'vpn_key', isAdminOnly: false },\r\n  { id: 3, path: ROUTES.ARCHIVE , name: 'archive', title: 'Archived keys', icon: 'unarchive', isAdminOnly: false },\r\n  { id: 2, path: ROUTES.REPOS, name: 'repos', title: 'Repositories', icon: 'apps', isAdminOnly: false },\r\n  { id: 4, path: ROUTES.STORAGE , name: 'storage', title: 'Storage', icon: 'inbox', isAdminOnly: false },\r\n];\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from 'src/lib/api';\r\nimport { IStoreSession } from './types';\r\nimport {\r\n  IApiResultAuthLogin,\r\n  IApiParamsAuthLogin,\r\n  IApiResultAuthLogout,\r\n} from 'src/lib/api/auth/types';\r\nimport { MAIN_MENU_LINKS } from 'src/constants/mainMenu';\r\n\r\ntype S = IStoreSession;\r\ntype PA<T> = PayloadAction<T>;\r\nconst prefix = 'SESSION';\r\n\r\nconst pureState: IStoreSession = {\r\n  isUserAuthorized: false,\r\n  isAlreadyFetched: false,\r\n  isSessionExpired: false,\r\n  mainMenuLinks: [],\r\n  errors: {\r\n    loginForm: null,\r\n  },\r\n};\r\n\r\n/** Sync logic */\r\nconst reducers = {\r\n  setUserData: (state: S, action: PA<IApiResultAuthLogin>): S => {\r\n    const { token, account } = action.payload;\r\n\r\n    return {\r\n      ...state,\r\n      token,\r\n      account,\r\n      isUserAuthorized: Boolean(token),\r\n    };\r\n  },\r\n  defineMenuLinks: (state: S): S => {\r\n    const isAdmin = Boolean(state.account?.isAdmin);\r\n    const mainMenuLinks = MAIN_MENU_LINKS.filter((item) => {\r\n      return isAdmin || !item.isAdminOnly;\r\n    });\r\n\r\n    return {\r\n      ...state,\r\n      mainMenuLinks,\r\n    };\r\n  },\r\n  setSessionExpired: (state: S, action: PA<{ isExpired: boolean }>): S => {\r\n    if (state.isUserAuthorized) {\r\n      return {\r\n        ...state,\r\n        isSessionExpired: action.payload.isExpired,\r\n      };\r\n    } else {\r\n      return {\r\n        ...state,\r\n        token: undefined,\r\n        isUserAuthorized: false,\r\n      };\r\n    }\r\n  },\r\n};\r\n\r\n/** Async logic */\r\nconst fetchLoginUser = createAsyncThunk(\r\n  `${prefix}/REQ_LOGIN`,\r\n  async (params: IApiParamsAuthLogin): Promise<IApiResultAuthLogin> => {\r\n    return await api.auth.login(params);\r\n  },\r\n);\r\n\r\nconst fetchMe = createAsyncThunk(\r\n  `${prefix}/REQ_ME`,\r\n  async (): Promise<IApiResultAuthLogin> => {\r\n    return await api.auth.me();\r\n  },\r\n);\r\n\r\nconst fetchLogout = createAsyncThunk(\r\n  `${prefix}/REQ_LOGOUT`,\r\n  async (): Promise<IApiResultAuthLogout> => {\r\n    return await api.auth.logout();\r\n  },\r\n);\r\n\r\n/** Combine slice reducer asnd actions set */\r\nconst set = createSlice<S, typeof reducers, string>({\r\n  initialState: pureState,\r\n  name: prefix,\r\n  reducers,\r\n  extraReducers: (builder) => {\r\n    [fetchLoginUser, fetchMe].forEach((trigger) => {\r\n      builder.addCase(trigger.pending, (state) => {\r\n        return {\r\n          ...state,\r\n          errors: {\r\n            ...state.errors,\r\n            loginForm: null,\r\n          },\r\n        };\r\n      });\r\n\r\n      builder.addCase(trigger.fulfilled, (state, action) => {\r\n        const { token, account, hosts } = action.payload;\r\n        return {\r\n          ...state,\r\n          token,\r\n          account,\r\n          isUserAuthorized: Boolean(token),\r\n          isSessionExpired: false,\r\n          isAlreadyFetched: true,\r\n          privateHost: hosts.private,\r\n          publicHost: hosts.public,\r\n        };\r\n      });\r\n\r\n      builder.addCase(trigger.rejected, (state, action) => {\r\n        const { error } = action;\r\n        if (error === undefined) {\r\n          return state;\r\n        }\r\n\r\n        const parsedError = error.message?.includes('No jwt presents')\r\n          ? {}\r\n          : {\r\n              loginForm:\r\n                error.code === '500'\r\n                  ? 'Server error. Please, try again.'\r\n                  : 'Wrong login/password pair.',\r\n            };\r\n\r\n        return {\r\n          ...pureState,\r\n          isAlreadyFetched: true,\r\n          errors: {\r\n            ...state.errors,\r\n            ...parsedError,\r\n          },\r\n        };\r\n      });\r\n    });\r\n\r\n    builder.addCase(fetchLogout.fulfilled, (state) => {\r\n      return {\r\n        ...state,\r\n        token: undefined,\r\n        isUserAuthorized: false,\r\n      };\r\n    });\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...set.actions,\r\n  fetchLoginUser,\r\n  fetchLogout,\r\n  fetchMe,\r\n};\r\n\r\nexport const { reducer } = set;\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from 'src/lib/api';\r\nimport { IStoreAccounts } from './types';\r\nimport {\r\n  IApiParamsAuthAccount,\r\n  IApiResultAuthAccount,\r\n  IApiResultAuthAccounts,\r\n  IApiResultAuthRemove,\r\n  IApiParamsAuthRemove,\r\n} from 'src/lib/api/auth/types';\r\n\r\ntype S = IStoreAccounts;\r\ntype PA<T> = PayloadAction<T>;\r\nconst prefix = 'ACCOUNTS';\r\n\r\n/** Sync logic */\r\nconst reducers = {\r\n  test: (state: S, _action: PA<number>): S => {\r\n    return state;\r\n  },\r\n};\r\n\r\n/** Async logic */\r\nconst fetchCreateAccount = createAsyncThunk(\r\n  `${prefix}/SUBMIT_ACCOUNT`,\r\n  async (params: IApiParamsAuthAccount, thunkApi): Promise<IApiResultAuthAccount | null> => {\r\n    const result = await api.auth.account(params);\r\n    await thunkApi.dispatch(fetchAccountsList());\r\n    return result;\r\n  },\r\n);\r\n\r\nconst fetchRemoveAccounts = createAsyncThunk(\r\n  `${prefix}/REMOVE_ACCOUNTS`,\r\n  async (params: IApiParamsAuthRemove, thunkApi): Promise<IApiResultAuthRemove | null> => {\r\n    const result = await api.auth.remove(params);\r\n    await thunkApi.dispatch(fetchAccountsList());\r\n    return result;\r\n  },\r\n);\r\n\r\nconst fetchAccountsList = createAsyncThunk(\r\n  `${prefix}/FETCH_LIST`,\r\n  async (): Promise<IApiResultAuthAccounts> => {\r\n    const result = await api.auth.accounts();\r\n    return result;\r\n  },\r\n);\r\n\r\n/** Combine slice reducer asnd actions set */\r\nconst set = createSlice<S, typeof reducers, string>({\r\n  initialState: {\r\n    create: {\r\n      error: null,\r\n      loading: false,\r\n    },\r\n    list: {\r\n      error: null,\r\n      loading: false,\r\n      accounts: [],\r\n    },\r\n  },\r\n  name: prefix,\r\n  reducers,\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchCreateAccount.fulfilled, (state, action) => {\r\n      if (action.payload === null) {\r\n        return { ...state, create: { ...state.create, error: true, loading: false } };\r\n      }\r\n      return { ...state, error: null, loading: false };\r\n    });\r\n    builder.addCase(fetchAccountsList.fulfilled, (state, action) => {\r\n      if (action.payload === null) {\r\n        return { ...state, list: { ...state.list, error: true, loading: false, accounts: [] } };\r\n      }\r\n\r\n      const { accounts } = action.payload;\r\n\r\n      return { ...state, list: { ...state.list, error: null, loading: false, accounts } };\r\n    });\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...set.actions,\r\n  fetchCreateAccount,\r\n  fetchAccountsList,\r\n  fetchRemoveAccounts,\r\n};\r\n\r\nexport const { reducer } = set;\r\n","export const DEFAULT_PAGE_OPTIONS = [4, 8, 16];\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from 'src/lib/api';\r\nimport { IStoreRepos } from './types';\r\nimport {\r\n  IApiParamsReposCreate,\r\n  IApiResultReposCreate,\r\n  IApiResultReposList,\r\n  IApiParamsReposRemove,\r\n  IApiResultReposRemove,\r\n  IApiParamsReposList,\r\n} from 'src/lib/api/repos/types';\r\nimport { DEFAULT_PAGE_OPTIONS } from 'src/constants/pager';\r\nimport { IApiPager } from 'src/lib/api/types';\r\n\r\ntype S = IStoreRepos;\r\ntype PA<T> = PayloadAction<T>;\r\nconst prefix = 'REPOS';\r\n\r\nconst pureState: S = {\r\n  create: {\r\n    error: null,\r\n    loading: false,\r\n  },\r\n  list: {\r\n    error: null,\r\n    loading: false,\r\n    items: [],\r\n    pager: {\r\n      page: 1,\r\n      perPage: DEFAULT_PAGE_OPTIONS[0],\r\n    },\r\n    pagerOptions: DEFAULT_PAGE_OPTIONS,\r\n  },\r\n};\r\n\r\n/** Sync logic */\r\nconst reducers = {\r\n  toggleEditModal: (state: S, action: PA<{ isOpened: boolean }>): S => {\r\n    const { isOpened } = action.payload;\r\n    return {\r\n      ...state,\r\n      isEditModalOpened: isOpened,\r\n    }\r\n  },\r\n  changePager: (state: S, action: PA<Partial<IApiPager>>): S => {\r\n    return {\r\n      ...state,\r\n      list: {\r\n        ...state.list,\r\n        pager: {\r\n          ...state.list.pager,\r\n          ...action.payload,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  changeSearch: (state: S, action: PA<Partial<{ search?: string }>>): S => {\r\n    return {\r\n      ...state,\r\n      list: {\r\n        ...state.list,\r\n        search: action.payload.search,\r\n      },\r\n    };\r\n  },\r\n};\r\n\r\n/** Async logic */\r\nconst fetchListRepo = createAsyncThunk(\r\n  `${prefix}/FETCH_LIST`,\r\n  async (params?: IApiParamsReposList): Promise<IApiResultReposList> => {\r\n    return await api.repos.list(params);\r\n  },\r\n);\r\n\r\nconst fetchCreateRepo = createAsyncThunk(\r\n  `${prefix}/SUBMIT_REPO`,\r\n  async (params: IApiParamsReposCreate): Promise<IApiResultReposCreate | null> => {\r\n    const result = await api.repos.create(params);\r\n    return result;\r\n  },\r\n);\r\n\r\nconst fetchRemoveRepos = createAsyncThunk(\r\n  `${prefix}/REMOVE_REPOS`,\r\n  async (params: IApiParamsReposRemove): Promise<IApiResultReposRemove> => {\r\n    const result = await api.repos.remove(params);\r\n    return result;\r\n  },\r\n);\r\n\r\n/** Combine slice reducer asnd actions set */\r\nconst set = createSlice<S, typeof reducers, string>({\r\n  initialState: pureState,\r\n  name: prefix,\r\n  reducers,\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchCreateRepo.fulfilled, (state, action) => {\r\n      if (action.payload === null) {\r\n        return { ...state, create: { ...state.create, error: true, loading: false } };\r\n      }\r\n      return { ...state, error: null, loading: false };\r\n    });\r\n\r\n    builder.addCase(fetchListRepo.fulfilled, (state, action) => {\r\n      return {\r\n        ...state,\r\n        list: {\r\n          ...state.list,\r\n          error: null,\r\n          loading: false,\r\n          items: action.payload.items,\r\n          pager: action.payload.pager,\r\n        },\r\n      };\r\n    });\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...set.actions,\r\n  fetchCreateRepo,\r\n  fetchListRepo,\r\n  fetchRemoveRepos,\r\n};\r\n\r\nexport const { reducer } = set;\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { IStoreStorage } from './types';\r\nimport api from 'src/lib/api';\r\nimport { IApiParamsKeysStorage, IApiResultKeysStorage } from 'src/lib/api/keys/storage';\r\nimport { IApiPager } from 'src/lib/api/types';\r\n\r\ntype S = IStoreStorage;\r\ntype PA<T> = PayloadAction<T>;\r\n\r\nconst prefix = 'STORAGE';\r\n\r\nconst pureState: S = {\r\n  items: [],\r\n  pager: {\r\n    page: 1,\r\n    perPage: 10,\r\n  },\r\n  pagerOptions: [10, 25, 50],\r\n  filter: {},\r\n};\r\n\r\n/** Sync logic */\r\nconst reducers = {\r\n  changePager: (state: S, action: PA<Partial<IApiPager>>): S => {\r\n    return {\r\n      ...state,\r\n      pager: {\r\n        ...state.pager,\r\n        ...action.payload,\r\n      },\r\n    };\r\n  },\r\n  changeFilter: (state: S, action: PA<Partial<Partial<S['filter']>>>): S => {\r\n    return {\r\n      ...state,\r\n      pager: {\r\n        ...state.pager,\r\n        page: 1,\r\n      },\r\n      filter: {\r\n        ...state.filter,\r\n        ...action.payload,\r\n      }\r\n    };\r\n  },\r\n};\r\n\r\n/** Async logic */\r\nconst fetchStorageItems = createAsyncThunk(\r\n  `${prefix}/FETCH_STORAGE`,\r\n  async (params: IApiParamsKeysStorage): Promise<IApiResultKeysStorage> => {\r\n    return await api.keys.storage(params);\r\n  },\r\n);\r\n\r\n/** Combine slice reducer asnd actions set */\r\nconst set = createSlice<S, typeof reducers, string>({\r\n  initialState: pureState,\r\n  name: prefix,\r\n  reducers,\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchStorageItems.fulfilled, (state, action) => {\r\n      const { items, pager } = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        items,\r\n        pager,\r\n      };\r\n    });\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...set.actions,\r\n  fetchStorageItems,\r\n};\r\n\r\nexport const { reducer } = set;\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from 'src/lib/api';\r\nimport { IStoreKeys } from './types';\r\nimport {\r\n  IApiResultKeysRemove,\r\n  IApiParamsKeysRemove,\r\n  IApiParamsKeysCreate,\r\n  IApiResultKeysCreate,\r\n} from 'src/lib/api/keys/types';\r\nimport { IApiParamsKeysArchive, IApiResultKeysArchive } from 'src/lib/api/keys/archive';\r\nimport { IApiParamsKeysRestore, IApiResultKeysRestore } from 'src/lib/api/keys/restore';\r\nimport { IApiParamsKeysList, IApiResultKeysList } from 'src/lib/api/keys/list';\r\nimport { IApiPager } from 'src/lib/api/types';\r\nimport { DEFAULT_PAGE_OPTIONS } from 'src/constants/pager';\r\n\r\ntype S = IStoreKeys;\r\ntype PA<T> = PayloadAction<T>;\r\nconst prefix = 'KEYS';\r\n\r\nexport const pureState: S = {\r\n  list: {\r\n    loading: {\r\n      keys: true,\r\n    },\r\n    errors: {\r\n      keys: null,\r\n    },\r\n    items: [],\r\n    pager: {\r\n      page: 1,\r\n      perPage: 4,\r\n    },\r\n    pagerOptions: DEFAULT_PAGE_OPTIONS,\r\n  },\r\n  edit: {\r\n    isModalOpened: false,\r\n    loading: false,\r\n    error: null,\r\n  },\r\n};\r\n\r\n/** Sync logic */\r\nconst reducers = {\r\n  changePager: (state: S, action: PA<Partial<IApiPager>>): S => {\r\n    return {\r\n      ...state,\r\n      list: {\r\n        ...state.list,\r\n        pager: {\r\n          ...state.list.pager,\r\n          ...action.payload,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  toggleEditModal: (state: S, action: PA<{ isOpened: boolean }>): S => {\r\n    return {\r\n      ...state,\r\n      edit: {\r\n        ...state.edit,\r\n        isModalOpened: action.payload.isOpened,\r\n      },\r\n    };\r\n  },\r\n  changeSearch: (state: S, action: PA<Partial<{ search?: string }>>): S => {\r\n    return {\r\n      ...state,\r\n      list: {\r\n        ...state.list,\r\n        query: action.payload.search,\r\n        pager: {\r\n          ...state.list.pager,\r\n          page: 1,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  setInitialRouteParsing: (state: S, action: PA<{ isParsed: boolean }>): S => {\r\n    return {\r\n      ...state,\r\n      isRouteParsed: action.payload.isParsed,\r\n    };\r\n  },\r\n  reset: () => pureState,\r\n};\r\n\r\n/** Async logic */\r\nconst fetchCreateKey = createAsyncThunk(\r\n  `${prefix}/SUBMIT_KEY`,\r\n  async (params: IApiParamsKeysCreate): Promise<IApiResultKeysCreate> => {\r\n    const result = await api.keys.create(params);\r\n    // await thunkApi.dispatch(listActions.fetchKeysList());\r\n    return result;\r\n  },\r\n);\r\n\r\nconst fetchKeysList = createAsyncThunk(\r\n  `${prefix}/FETCH_KEYS`,\r\n  async (params: IApiParamsKeysList): Promise<IApiResultKeysList> => {\r\n    return await api.keys.list(params);\r\n  },\r\n);\r\n\r\nconst fetchRemoveKeyItem = createAsyncThunk(\r\n  `${prefix}/REMOVE_KEY`,\r\n  async (params: IApiParamsKeysRemove): Promise<IApiResultKeysRemove> => {\r\n    const result = await api.keys.remove(params);\r\n    return result ? result : { deleted: [] };\r\n  },\r\n);\r\n\r\nconst fetchArchiveKeyItem = createAsyncThunk(\r\n  `${prefix}/ARCHIVE_KEY`,\r\n  async (params: IApiParamsKeysArchive): Promise<IApiResultKeysArchive> => {\r\n    return await api.keys.archive(params);\r\n  },\r\n);\r\n\r\nconst fetchRestoreKeyItem = createAsyncThunk(\r\n  `${prefix}/RESTORE_KEY`,\r\n  async (params: IApiParamsKeysRestore): Promise<IApiResultKeysRestore> => {\r\n    return await api.keys.restore(params);\r\n  },\r\n);\r\n\r\n/** Combine slice reducer asnd actions set */\r\nconst set = createSlice<S, typeof reducers, string>({\r\n  initialState: pureState,\r\n  name: prefix,\r\n  reducers,\r\n  extraReducers: (builder) => {\r\n    builder.addCase(\r\n      fetchKeysList.pending,\r\n      (state): S => {\r\n        return {\r\n          ...state,\r\n          list: { ...state.list, loading: { ...state.list.loading, keys: true } },\r\n        };\r\n      },\r\n    );\r\n    builder.addCase(\r\n      fetchKeysList.fulfilled,\r\n      (state, action): S => {\r\n        const { items, pager } = action.payload;\r\n        return {\r\n          ...state,\r\n          list: { ...state.list, items, pager, loading: { ...state.list.loading, keys: false } },\r\n        };\r\n      },\r\n    );\r\n\r\n    builder.addCase(\r\n      fetchRemoveKeyItem.fulfilled,\r\n      (state, action): S => {\r\n        const { id } = action.meta.arg;\r\n        const { totalItems } = state.list.pager;\r\n\r\n        return {\r\n          ...state,\r\n          list: {\r\n            ...state.list,\r\n            items: state.list.items.filter((item) => id !== item.id),\r\n            pager: { ...state.list.pager, totalItems: totalItems ? totalItems - 1 : undefined },\r\n          },\r\n        };\r\n      },\r\n    );\r\n\r\n    builder.addCase(\r\n      fetchArchiveKeyItem.fulfilled,\r\n      (state): S => {\r\n        const { totalItems } = state.list.pager;\r\n\r\n        return {\r\n          ...state,\r\n          list: {\r\n            ...state.list,\r\n            pager: { ...state.list.pager, totalItems: totalItems ? totalItems - 1 : undefined },\r\n          },\r\n        };\r\n      },\r\n    );\r\n\r\n    builder.addCase(\r\n      fetchRestoreKeyItem.fulfilled,\r\n      (state): S => {\r\n        const { totalItems } = state.list.pager;\r\n\r\n        return {\r\n          ...state,\r\n          list: {\r\n            ...state.list,\r\n            pager: { ...state.list.pager, totalItems: totalItems ? totalItems - 1 : undefined },\r\n          },\r\n        };\r\n      },\r\n    );\r\n\r\n    builder.addCase(\r\n      fetchCreateKey.fulfilled,\r\n      (state, action): S => {\r\n        const { totalItems } = state.list.pager;\r\n        return {\r\n          ...state,\r\n          list: {\r\n            ...state.list,\r\n            pager: {\r\n              ...state.list.pager,\r\n              totalItems: totalItems ? totalItems + 1 : undefined,\r\n            },\r\n          },\r\n          edit: { ...state.edit, error: null, loading: false, item: action.payload.key },\r\n        };\r\n      },\r\n    );\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...set.actions,\r\n  fetchKeysList,\r\n  fetchRemoveKeyItem,\r\n  fetchArchiveKeyItem,\r\n  fetchRestoreKeyItem,\r\n  fetchCreateKey,\r\n};\r\n\r\nexport const { reducer } = set;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport api from 'src/lib/api';\r\nimport { IApiParamsKeysPreview, IApiResultKeysPreview } from 'src/lib/api/keys/preview';\r\nimport { AVAIL_PREVIEW_FORMATS, AVAIL_PRIVACY } from './constants';\r\nimport { IStoreKeyPreview } from './types';\r\n\r\ntype S = IStoreKeyPreview;\r\ntype PA<T> = PayloadAction<T>;\r\nconst prefix = 'KEY_PREVIEW';\r\n\r\n/** Sync logic */\r\nconst reducers = {\r\n  toggleModal: (state: S, action: PA<{ isOpen?: boolean }>): S => {\r\n    const { isOpen } = action.payload;\r\n\r\n    return {\r\n      ...state,\r\n      modal: {\r\n        ...state.modal,\r\n        isOpen: isOpen === undefined ? !state.modal.isOpen : isOpen,\r\n      },\r\n    };\r\n  },\r\n  setParams: (state: S, action: PA<Partial<S['params']>>): S => {\r\n    return {\r\n      ...state,\r\n      params: {\r\n        ...state.params,\r\n        ...action.payload,\r\n      }\r\n    };\r\n  },\r\n};\r\n\r\n/** Async logic */\r\nconst fetchKeyPreview = createAsyncThunk(\r\n  `${prefix}/FETCH_KEY`,\r\n  async (params: IApiParamsKeysPreview, _thunkApi): Promise<IApiResultKeysPreview> => {\r\n    const result = await api.keys.preview(params);\r\n    return result;\r\n  },\r\n);\r\n\r\n/** Combine slice reducer and actions set */\r\nconst set = createSlice<S, typeof reducers, string>({\r\n  initialState: {\r\n    availFormats: AVAIL_PREVIEW_FORMATS,\r\n    availPrivacy: AVAIL_PRIVACY,\r\n    params: {},\r\n    modal: {},\r\n    details: {\r\n      error: null,\r\n      loading: false,\r\n    },\r\n  },\r\n  name: prefix,\r\n  reducers,\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchKeyPreview.fulfilled, (state, action) => {\r\n      return {\r\n        ...state,\r\n        details: {\r\n          ...state.details,\r\n          error: null,\r\n          loading: false,\r\n          data: action.payload,\r\n        },\r\n      };\r\n    });\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  ...set.actions,\r\n  fetchKeyPreview,\r\n};\r\n\r\nexport const { reducer } = set;\r\n","export const AVAIL_PREVIEW_FORMATS = [\r\n  { id: 'jwk', label: 'JWK' },\r\n  { id: 'pem', label: 'PEM' },\r\n];\r\n\r\nexport const AVAIL_PRIVACY = [\r\n  { id: 'private', label: 'PRIVATE' },\r\n  { id: 'public', label: 'PUBLIC' },\r\n];\r\n","import { combineReducers } from 'redux';\r\nimport { reducer as sessionReducer } from 'src/containers/Session/reducer';\r\nimport { reducer as accountsReducer } from 'src/containers/Accounts/reducer';\r\nimport { reducer as reposReducer } from 'src/containers/Repos/reducer';\r\nimport { reducer as storageReducer } from 'src/containers/Storage/reducer';\r\nimport { reducer as keysReducer } from 'src/containers/Keys/reducer';\r\nimport { reducer as keyPreviewReducer } from 'src/containers/KeyPreview/reducer';\r\n\r\nconst reducers = {\r\n  session: sessionReducer,\r\n  keys: keysReducer,\r\n  accounts: accountsReducer,\r\n  repos: reposReducer,\r\n  storage: storageReducer,\r\n  keyPreview: keyPreviewReducer,\r\n}\r\n\r\nconst rootReducer = combineReducers(reducers);\r\n\r\nexport type IStore = ReturnType<typeof rootReducer>;\r\n\r\nexport default rootReducer;\r\n","import { fork, takeEvery, put, ForkEffect } from 'redux-saga/effects';\r\nimport { actions } from './reducer';\r\n\r\nexport function* sagaSession(): IterableIterator<ForkEffect<void>> {\r\n  yield fork(menuUpdate);\r\n}\r\n\r\nfunction* menuUpdate() {\r\n  yield takeEvery([\r\n    actions.fetchLoginUser.fulfilled,\r\n    actions.fetchMe.fulfilled,\r\n  ], function* () {\r\n    yield put(actions.defineMenuLinks());\r\n  });\r\n}\r\n","import { createSelector } from 'reselect';\r\nimport { IStore } from 'src/reducer';\r\nimport { IStoreKeys } from './types';\r\n\r\nexport const containerState = (state: IStore): IStoreKeys => state.keys;\r\nexport const keysItemsSelector = createSelector(containerState, (state) => state.list.items);\r\nexport const keysListSelector = createSelector(containerState, (state) => state.list);\r\nexport const keysPagerSelector = createSelector(containerState, (state) => state.list.pager);\r\nexport const keysSearchSelector = createSelector(containerState, (state) => state.list.query);\r\nexport const isEditModalOpened = createSelector(\r\n  containerState,\r\n  (state) => state.edit.isModalOpened,\r\n);\r\nexport const isRouteParsedSelector = createSelector(containerState, (state) => state.isRouteParsed);\r\nexport const keysPagerOptionsSelector = createSelector(\r\n  containerState,\r\n  (state) => state.list.pagerOptions,\r\n);\r\nexport const isKeyListEmpty = createSelector(\r\n  keysSearchSelector,\r\n  keysListSelector,\r\n  (search, list) => {\r\n    return (!search || search.length === 0) && !list.loading.keys && list.items.length === 0;\r\n  },\r\n);\r\n\r\nexport const keysRequestSelector = createSelector(keysListSelector, (list) => {\r\n  return {\r\n    loading: list.loading.keys,\r\n    error: list.errors.keys,\r\n    data: {\r\n      items: list.items,\r\n    },\r\n    pager: list.pager,\r\n  };\r\n});\r\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { fork, put, select, takeEvery } from 'redux-saga/effects';\r\nimport { IApiParamsKeysList } from 'src/lib/api/keys/list';\r\nimport { IApiPager } from 'src/lib/api/types';\r\nimport { actions as keysActions } from './reducer';\r\nimport { keysPagerSelector } from './selectors';\r\n\r\nexport function* sagaKeys() {\r\n  yield fork(reloadKeysList);\r\n}\r\n\r\nfunction* reloadKeysList() {\r\n  yield takeEvery(\r\n    [\r\n      keysActions.fetchCreateKey.fulfilled,\r\n      keysActions.fetchRemoveKeyItem.fulfilled,\r\n      keysActions.fetchArchiveKeyItem.fulfilled,\r\n      keysActions.fetchRestoreKeyItem.fulfilled,\r\n    ],\r\n    function* (action) {\r\n      const pager: IApiPager = yield select(keysPagerSelector);\r\n      const isArchived = [\r\n        keysActions.fetchRestoreKeyItem.fulfilled.toString(),\r\n        keysActions.fetchRemoveKeyItem.fulfilled.toString(),\r\n      ].includes(action.type);\r\n\r\n      const fetchParams: IApiParamsKeysList = {\r\n        page: pager.page,\r\n        perPage: pager.perPage,\r\n        isArchived,\r\n      };\r\n\r\n      if (pager.totalItems) {\r\n        const targetPage = Math.max(Math.ceil(pager.totalItems / pager.perPage), 1);\r\n\r\n        if (targetPage < pager.page) {\r\n          yield put(keysActions.changePager({ page: targetPage }));\r\n        } else {\r\n          yield put<any>(keysActions.fetchKeysList(fetchParams));\r\n        }\r\n      } else {\r\n        yield put<any>(keysActions.fetchKeysList(fetchParams));\r\n      }\r\n    },\r\n  );\r\n}\r\n","import { createSelector } from 'reselect';\r\nimport { IStore } from 'src/reducer';\r\nimport { IStoreRepos } from './types';\r\n\r\nexport const containerState = (state: IStore): IStoreRepos => state.repos;\r\nexport const createFetchSelector = createSelector(containerState, (state) => state.create);\r\nexport const reposListSelector = createSelector(containerState, (state) => state.list);\r\nexport const pagerSelector = createSelector(reposListSelector, (list) => list.pager);\r\nexport const searchSelector = createSelector(reposListSelector, (list) => list.search);\r\nexport const pagerOptionsSelector = createSelector(reposListSelector, (list) => list.pagerOptions);\r\nexport const isEditModalOpened = createSelector(containerState, (state) => Boolean(state.isEditModalOpened));\r\nexport const isEmptySelector = createSelector(reposListSelector, (list) => {\r\n  const { search, loading, items } = list;\r\n  return (!search || search.length === 0) && !loading && items.length === 0;\r\n});\r\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { fork, put, select, takeEvery } from 'redux-saga/effects';\r\nimport { IApiPager } from 'src/lib/api/types';\r\nimport { actions as reposActions } from './reducer';\r\nimport * as reposSelectors from './selectors';\r\n\r\nexport function* sagaRepos() {\r\n  yield fork(reloadReposListAfterCreationOrDeletion);\r\n}\r\n\r\nfunction* reloadReposListAfterCreationOrDeletion() {\r\n  yield takeEvery(\r\n    [reposActions.fetchCreateRepo.fulfilled, reposActions.fetchRemoveRepos.fulfilled],\r\n    function* (action) {\r\n      const pager: IApiPager = yield select(reposSelectors.pagerSelector);\r\n      const search: string = yield select(reposSelectors.searchSelector);\r\n      const isCreation = action.type === reposActions.fetchCreateRepo.fulfilled.toString();\r\n      const fetchParams = { page: pager.page, perPage: pager.perPage, search };\r\n\r\n      if (isCreation && pager.totalItems) {\r\n        const newPage = Math.ceil(pager.totalItems + 1 / pager.perPage);\r\n        yield put(reposActions.changePager({ page: newPage }))\r\n      } else {\r\n        yield put<any>(reposActions.fetchListRepo(fetchParams));\r\n      }\r\n    },\r\n  );\r\n}\r\n","import { fork, ForkEffect } from 'redux-saga/effects';\r\n\r\nimport { sagaSession } from 'src/containers/Session/saga';\r\nimport { sagaKeys } from 'src/containers/Keys/saga';\r\nimport { sagaRepos } from 'src/containers/Repos/saga';\r\n\r\nexport default function* mainSaga(): IterableIterator<ForkEffect<void>> {\r\n  yield fork(sagaSession);\r\n  yield fork(sagaKeys);\r\n  yield fork(sagaRepos);\r\n}\r\n","import { createStore, applyMiddleware, Middleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport thunk from 'redux-thunk';\r\nimport { createLogger } from 'redux-logger';\r\n\r\nimport rootReducer, { IStore } from './reducer';\r\nimport rootSaga from './saga';\r\nimport { useDispatch } from 'react-redux';\r\nimport { ThunkDispatch, AnyAction, PayloadAction, SerializedError } from '@reduxjs/toolkit';\r\nimport { IS_DEV } from './constants/settings';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport function initializeStore(initialState = {}) {\r\n  // ======================================================\r\n  // Middleware Configuration\r\n  // ======================================================\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const middleware: Middleware[] = [thunk, sagaMiddleware];\r\n\r\n  if (IS_DEV) {\r\n    middleware.push(createLogger({ collapsed: true }));\r\n  }\r\n\r\n  // ======================================================\r\n  // Enhancer Configuration\r\n  // ======================================================\r\n  const enhancer = applyMiddleware(...middleware);\r\n\r\n  // ======================================================\r\n  // Store Instantiation\r\n  // ======================================================\r\n  const result = createStore(rootReducer, initialState, composeWithDevTools(enhancer));\r\n\r\n  sagaMiddleware.run(rootSaga);\r\n\r\n  return result;\r\n}\r\n\r\nexport const store = initializeStore();\r\nexport type AppDispatch = ThunkDispatch<IStore, void, AnyAction>;\r\nexport const useAppDispatch = (): AppDispatch => useDispatch();\r\n\r\nexport type IDispatchReturn<R, P> =\r\n  | { error: SerializedError }\r\n  | PayloadAction<\r\n      R,\r\n      string,\r\n      {\r\n        arg: P;\r\n        requestId: string;\r\n      },\r\n      never\r\n    >;\r\n","import { colors } from '@material-ui/core';\r\n\r\nconst white = '#FFFFFF';\r\nconst black = '#000000';\r\n\r\nexport default {\r\n  black,\r\n  white,\r\n  primary: {\r\n    contrastText: white,\r\n    dark: colors.indigo[900],\r\n    main: colors.indigo[500],\r\n    light: colors.indigo[100]\r\n  },\r\n  secondary: {\r\n    contrastText: white,\r\n    dark: colors.blue[900],\r\n    main: colors.blue['A400'],\r\n    light: colors.blue['A400']\r\n  },\r\n  error: {\r\n    contrastText: white,\r\n    dark: colors.red[900],\r\n    main: colors.red[600],\r\n    light: colors.red[400]\r\n  },\r\n  text: {\r\n    primary: colors.blueGrey[900],\r\n    secondary: colors.blueGrey[600],\r\n    link: colors.blue[600]\r\n  },\r\n  link: colors.blue[800],\r\n  icon: colors.blueGrey[600],\r\n  background: {\r\n    default: '#F4F6F8',\r\n    paper: white\r\n  },\r\n  divider: colors.grey[200]\r\n};\r\n","import { Palette } from '@material-ui/core/styles/createPalette';\r\nimport { TypographyOptions } from '@material-ui/core/styles/createTypography';\r\n\r\nconst typography: ((palette: Palette) => TypographyOptions) = (palette) => ({\r\n  h1: {\r\n    color: palette.text.primary,\r\n    fontWeight: 500,\r\n    fontSize: '35px',\r\n    letterSpacing: '-0.24px',\r\n    lineHeight: '40px',\r\n  },\r\n  h2: {\r\n    color: palette.text.primary,\r\n    fontWeight: 500,\r\n    fontSize: '29px',\r\n    letterSpacing: '-0.24px',\r\n    lineHeight: '32px',\r\n  },\r\n  h3: {\r\n    color: palette.text.primary,\r\n    fontWeight: 500,\r\n    fontSize: '24px',\r\n    letterSpacing: '-0.06px',\r\n    lineHeight: '28px',\r\n  },\r\n  h4: {\r\n    color: palette.text.primary,\r\n    fontWeight: 500,\r\n    fontSize: '20px',\r\n    letterSpacing: '-0.06px',\r\n    lineHeight: '24px',\r\n  },\r\n  h5: {\r\n    color: palette.text.primary,\r\n    fontWeight: 500,\r\n    fontSize: '16px',\r\n    letterSpacing: '-0.05px',\r\n    lineHeight: '20px',\r\n  },\r\n  h6: {\r\n    color: palette.text.primary,\r\n    fontWeight: 500,\r\n    fontSize: '14px',\r\n    letterSpacing: '-0.05px',\r\n    lineHeight: '20px',\r\n  },\r\n  subtitle1: {\r\n    color: palette.text.primary,\r\n    fontSize: '16px',\r\n    letterSpacing: '-0.05px',\r\n    lineHeight: '25px',\r\n  },\r\n  subtitle2: {\r\n    color: palette.text.secondary,\r\n    fontWeight: 400,\r\n    fontSize: '14px',\r\n    letterSpacing: '-0.05px',\r\n    lineHeight: '21px',\r\n  },\r\n  body1: {\r\n    color: palette.text.primary,\r\n    fontSize: '14px',\r\n    letterSpacing: '-0.05px',\r\n    lineHeight: '21px',\r\n  },\r\n  body2: {\r\n    color: palette.text.secondary,\r\n    fontSize: '12px',\r\n    letterSpacing: '-0.04px',\r\n    lineHeight: '18px',\r\n  },\r\n  button: {\r\n    color: palette.text.primary,\r\n    fontSize: '14px',\r\n  },\r\n  caption: {\r\n    color: palette.text.secondary,\r\n    fontSize: '11px',\r\n    letterSpacing: '0.33px',\r\n    lineHeight: '13px',\r\n  },\r\n  overline: {\r\n    color: palette.text.secondary,\r\n    fontSize: '11px',\r\n    fontWeight: 500,\r\n    letterSpacing: '0.33px',\r\n    lineHeight: '13px',\r\n    textTransform: 'uppercase',\r\n  },\r\n});\r\n\r\nexport default typography;\r\n","import MuiTableHead from './MuiTableHead';\r\nimport MuiTableCell from './MuiTableCell';\r\nimport MuiCardHeader from './MuiCardHeader';\r\n\r\nexport default {\r\n  MuiTableHead,\r\n  MuiTableCell,\r\n  MuiCardHeader,\r\n}\r\n","import { colors } from '@material-ui/core';\r\n\r\nexport default {\r\n  root: {\r\n    backgroundColor: colors.grey[50],\r\n  }\r\n};\r\n","import { colors } from '@material-ui/core';\r\n\r\nexport default {\r\n  root: {\r\n    fontSize: 14,\r\n  },\r\n  body: {\r\n    borderBottom: `1px solid ${colors.grey[200]}`,\r\n  },\r\n  head: {\r\n    paddingTop: 10,\r\n    paddingBottom: 10,\r\n    borderBottom: `1px solid ${colors.grey[200]}`,\r\n    color: colors.blueGrey[500],\r\n  }\r\n};\r\n","// import { colors } from '@material-ui/core';\r\n\r\nimport { colors } from \"@material-ui/core\";\r\n\r\nexport default {\r\n  root: {\r\n    borderBottom: `1px solid ${colors.grey[200]}`,\r\n  },\r\n  action: {\r\n    marginRight: 0,\r\n    marginTop: 0,\r\n  }\r\n};\r\n","import { createMuiTheme } from '@material-ui/core';\r\n\r\nimport palette from './palette';\r\nimport typography from './typography';\r\nimport overrides from './overrides';\r\n\r\nconst theme = createMuiTheme({\r\n  palette,\r\n  typography,\r\n  overrides,\r\n});\r\n\r\nexport default theme;\r\n","import { createSelector } from 'reselect';\r\nimport { IStore } from 'src/reducer';\r\nimport { IStoreSession } from './types';\r\n\r\nexport const containerState = (state: IStore): IStoreSession => state.session;\r\nexport const isUserAuthorized = createSelector(containerState, (state) => state.isUserAuthorized);\r\nexport const isAlreadyFetched = createSelector(containerState, (state) => state.isAlreadyFetched);\r\nexport const isSessionExpired = createSelector(containerState, (state) => state.isSessionExpired);\r\nexport const account = createSelector(containerState, (state) => state.account);\r\nexport const host = createSelector(containerState, (state) => state.host);\r\nexport const mainMenuLinks = createSelector(containerState, (state) => state.mainMenuLinks);\r\nexport const errors = createSelector(containerState, (state) => state.errors);\r\nexport const jwt = createSelector(containerState, (state) => state.token || null);\r\nexport const tokenSelector = createSelector(containerState, (state) => state.token || null);\r\nexport const privateHostSelector = createSelector(containerState, (state) => state.privateHost);\r\nexport const publicHostSelector = createSelector(containerState, (state) => state.publicHost);\r\n","import styled from 'styled-components';\r\n\r\nexport const Grow = styled.div`\r\n  flex-grow: 1;\r\n`;\r\n","import { useCallback } from 'react';\r\nimport { IApiParamsAuthLogin } from 'src/lib/api/auth/types';\r\nimport { useAppDispatch } from 'src/store';\r\nimport { actions as sessionActions } from './reducer';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport const useContainerSession = () => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const logout = useCallback(() => {\r\n    return dispatch(sessionActions.fetchLogout());\r\n  }, [dispatch]);\r\n\r\n  const fetchMe = useCallback(() => dispatch(sessionActions.fetchMe()), [dispatch]);\r\n\r\n  const fetchLoginUser = useCallback((params: IApiParamsAuthLogin) => {\r\n    return dispatch(sessionActions.fetchLoginUser(params));\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    logout,\r\n    fetchMe,\r\n    fetchLoginUser,\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport { Toolbar, Button, Typography } from '@material-ui/core';\r\n\r\nimport * as sessionSelectors from 'src/containers/Session/selectors';\r\n\r\nimport * as S from './styled';\r\nimport { useContainerSession } from 'src/containers/Session/hooks';\r\n\r\nconst TopBar: React.FC = () => {\r\n  const user = useSelector(sessionSelectors.account);\r\n  const { logout } = useHooks();\r\n\r\n  const isLogoutAvail = user !== undefined;\r\n\r\n  return (\r\n    <AppBar position={'static'}>\r\n      <Toolbar>\r\n        <Typography variant={'h4'} color=\"inherit\">\r\n          Orkeystore\r\n        </Typography>\r\n        <S.Grow />\r\n        {isLogoutAvail && (\r\n          <Button color=\"inherit\" onClick={logout}>\r\n            Logout\r\n          </Button>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { logout } = useContainerSession();\r\n\r\n  return {\r\n    logout,\r\n  }\r\n}\r\n\r\nexport default TopBar;\r\n","import styled from 'styled-components';\r\n\r\nexport const Wrap = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n`;\r\n\r\nexport const BarHolder = styled.div`\r\n`\r\nexport const FormHolder = styled.div`\r\n  flex-grow: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n","import styled from 'styled-components';\r\nimport { Box, Paper, Typography } from \"@material-ui/core\";\r\nimport theme from 'src/theme';\r\n\r\nexport const Root = styled(Paper)<{ test?: string }>`\r\n  padding: 10px;\r\n  flex-grow: 1;\r\n  background-color: ${theme.palette.error.light};\r\n  color: ${theme.palette.error.contrastText};\r\n`;\r\n\r\nexport const Message = styled(Typography)`\r\n  padding-left: 15px;\r\n  padding-top: 2px;\r\n`;\r\n\r\nexport const TextWrap = styled(Box)`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: flex-start;\r\n`;\r\n","import React from 'react';\r\nimport ErrorOutlineRoundedIcon from '@material-ui/icons/ErrorOutlineRounded';\r\nimport { PaperProps } from '@material-ui/core/Paper';\r\nimport * as S from './styles';\r\n\r\nexport interface IPropsMessage {\r\n  elevation?: number;\r\n  severnity?: string;\r\n  root?: PaperProps;\r\n}\r\n\r\nconst Message: React.FC<IPropsMessage> = (props) => {\r\n  return (\r\n    <S.Root elevation={props.elevation} {...props.root}>\r\n      <S.TextWrap>\r\n        <ErrorOutlineRoundedIcon color=\"inherit\" />\r\n        <S.Message color=\"inherit\">\r\n          { props.children }\r\n        </S.Message>\r\n      </S.TextWrap>\r\n    </S.Root>\r\n  );\r\n};\r\n\r\nMessage.defaultProps = {\r\n  elevation: 0,\r\n  severnity: 'error'\r\n}\r\n\r\nexport default Message;\r\n","import styled from 'styled-components';\r\nimport { Button } from '@material-ui/core';\r\n\r\nexport const Container = styled.div`\r\n  width: 300px;\r\n`;\r\n\r\nexport const Title = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nexport const Body = styled.div``;\r\n\r\nexport const BodyLine = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 20px;\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nexport const LineItem = styled.div`\r\n  flex-grow: 1;\r\n  margin-bottom: 10px;\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nexport const SubmitButton = styled(Button)`\r\n  width: 100%;\r\n`;\r\n","import React, { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Formik, Form, Field, FieldProps, FormikErrors, FormikProps } from 'formik';\r\n\r\nimport Message from 'src/components/Message';\r\nimport { errors as userServerErrors } from 'src/containers/Session/selectors';\r\n\r\nimport * as S from './styled';\r\nimport { TextField, CardContent, Card, Typography, CardHeader } from '@material-ui/core';\r\nimport { useContainerSession } from 'src/containers/Session/hooks';\r\n\r\nexport interface IUserLoginData {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nconst initialValues = { username: '', password: '' };\r\n\r\nconst LoginForm: React.FC = () => {\r\n  const serverErrors = useSelector(userServerErrors);\r\n  const { handleSubmit, validate } = useHooks();\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader title={<Typography variant=\"h3\">Sign in</Typography>} />\r\n      <CardContent>\r\n        <S.Container>\r\n          <S.Body>\r\n            <Formik\r\n              initialValues={initialValues}\r\n              validate={validate}\r\n              onSubmit={handleSubmit}\r\n            >\r\n              {(_props: FormikProps<IUserLoginData>) => {\r\n                return (\r\n                  <Form>\r\n                    <S.BodyLine>\r\n                      <Field name=\"username\">\r\n                        {(params: FieldProps<string>) => {\r\n                          const { field, meta } = params;\r\n                          return (\r\n                            <TextField\r\n                              error={Boolean(meta.touched && meta.error)}\r\n                              label=\"Login\"\r\n                              variant=\"outlined\"\r\n                              autoComplete=\"current-login\"\r\n                              {...field}\r\n                            />\r\n                          );\r\n                        }}\r\n                      </Field>\r\n                    </S.BodyLine>\r\n                    <S.BodyLine>\r\n                      <Field name=\"password\">\r\n                        {(params: FieldProps<string>) => {\r\n                          const { field, meta } = params;\r\n                          return (\r\n                            <TextField\r\n                              label=\"Password\"\r\n                              variant=\"outlined\"\r\n                              type=\"password\"\r\n                              autoComplete=\"current-password\"\r\n                              error={Boolean(meta.touched && meta.error)}\r\n                              {...field}\r\n                            />\r\n                          );\r\n                        }}\r\n                      </Field>\r\n                    </S.BodyLine>\r\n                    {serverErrors.loginForm && (\r\n                      <S.BodyLine>\r\n                        <Message>{serverErrors.loginForm}</Message>\r\n                      </S.BodyLine>\r\n                    )}\r\n                    <S.BodyLine>\r\n                      <S.LineItem>\r\n                        <S.SubmitButton\r\n                          color=\"secondary\"\r\n                          size=\"large\"\r\n                          type=\"submit\"\r\n                          variant=\"contained\"\r\n                        >\r\n                          \r\n                        </S.SubmitButton>\r\n                      </S.LineItem>\r\n                    </S.BodyLine>\r\n                  </Form>\r\n                );\r\n              }}\r\n            </Formik>\r\n          </S.Body>\r\n        </S.Container>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { fetchLoginUser } = useContainerSession();\r\n\r\n  const handleSubmit = useCallback(\r\n    async (values: IUserLoginData) => {\r\n      await fetchLoginUser(values);\r\n    },\r\n    [fetchLoginUser],\r\n  );\r\n\r\n  const validate = useCallback((values: IUserLoginData) => {\r\n    const { username, password } = values;\r\n    const errors: FormikErrors<typeof values> = {};\r\n\r\n    if (!username || username.length === 0) {\r\n      errors.username = 'Username required';\r\n    }\r\n\r\n    if (!password || password.length === 0) {\r\n      errors.password = 'Password required';\r\n    }\r\n\r\n    return errors;\r\n  }, []);\r\n\r\n\r\n  return {\r\n    validate,\r\n    handleSubmit,\r\n  };\r\n};\r\n\r\nexport default LoginForm;\r\n","import React from 'react';\r\nimport TopBar from 'src/components/TopBar';\r\n\r\nimport * as S from './styled';\r\nimport LoginForm from 'src/components/LoginForm';\r\n\r\nexport interface IPropsAuthLayout {}\r\n\r\nconst AuthLayout: React.FC = () => {\r\n  return (\r\n    <S.Wrap>\r\n      <S.BarHolder>\r\n        <TopBar />\r\n      </S.BarHolder>\r\n      <S.FormHolder>\r\n        <LoginForm />\r\n      </S.FormHolder>\r\n    </S.Wrap>\r\n  );\r\n};\r\n\r\nexport default AuthLayout;\r\n","import React from 'react';\r\nimport { Dialog } from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport { isSessionExpired } from 'src/containers/Session/selectors';\r\nimport LoginForm from 'src/components/LoginForm';\r\n\r\nconst ExpiredSession: React.FC = () => {\r\n  const isExpired = useSelector(isSessionExpired)\r\n\r\n  return (\r\n    <Dialog open={isExpired}>\r\n      <LoginForm />\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ExpiredSession;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { List, ListItem, ListItemText, ListItemIcon, makeStyles } from '@material-ui/core';\r\nimport Icon from '@material-ui/core/Icon';\r\n\r\nimport { mainMenuLinks } from 'src/containers/Session/selectors';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  iconWrap: {\r\n    maxWidth: 40,\r\n    minWidth: 40,\r\n  },\r\n}));\r\n\r\nconst MainMenu: React.FC = () => {\r\n  const history = useHistory();\r\n  const mainMenu = useSelector(mainMenuLinks);\r\n  const styles = useStyles();\r\n\r\n  return (\r\n    <List component=\"nav\">\r\n      {mainMenu.map((item) => {\r\n        return (\r\n          <ListItem key={item.id} button onClick={() => history.push(item.path)}>\r\n            <ListItemIcon className={styles.iconWrap}>\r\n              <Icon>{item.icon}</Icon>\r\n            </ListItemIcon>\r\n            <ListItemText>{item.title}</ListItemText>\r\n          </ListItem>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n};\r\n\r\nexport default MainMenu;\r\n","import styled from 'styled-components';\r\nimport theme from 'src/theme';\r\n\r\nexport const Wrap = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1 1 auto;\r\n`;\r\nexport const Header = styled.div``;\r\nexport const Body = styled.div`\r\n  flex: 1 1 auto;\r\n  display: flex;\r\n  min-width: 0;\r\n`;\r\nexport const Menu = styled.div`\r\n  flex: 0 0 250px;\r\n  background-color: ${theme.palette.background.paper};\r\n`;\r\n\r\nexport const Main = styled.main`\r\n  display: flex;\r\n  background-color: ${theme.palette.background.default};\r\n  flex: 1 1 auto;\r\n  min-width: 0;\r\n`;\r\n","import React from 'react';\r\nimport { renderRoutes, RouteConfigComponentProps } from 'react-router-config';\r\n\r\nimport TopBar from 'src/components/TopBar';\r\nimport ExpiredSession from 'src/components/ExpiredSession';\r\nimport MainMenu from 'src/components/MainMenu';\r\n\r\nimport * as S from './styled';\r\n\r\nexport interface IPropsDashboardLayout extends RouteConfigComponentProps {\r\n}\r\n\r\nconst DashboardLayout: React.FC<IPropsDashboardLayout> = (props) => {\r\n  const { route } = props;\r\n  return (\r\n    <S.Wrap>\r\n      <ExpiredSession />\r\n      <S.Header>\r\n        <TopBar />\r\n      </S.Header>\r\n      <S.Body>\r\n        <S.Menu>\r\n          <MainMenu />\r\n        </S.Menu>\r\n        <S.Main>\r\n          {route && route.routes && renderRoutes(route.routes)}\r\n        </S.Main>\r\n      </S.Body>\r\n    </S.Wrap>\r\n  );\r\n};\r\n\r\nexport default DashboardLayout;\r\n","export const generatePassword = (\r\n  length: number,\r\n  charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',\r\n): string => {\r\n  let retVal = '';\r\n  for (let i = 0, n = charset.length; i < length; ++i) {\r\n    retVal += charset.charAt(Math.floor(Math.random() * n));\r\n  }\r\n  return retVal;\r\n};\r\n","import { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useAppDispatch } from 'src/store';\r\nimport { actions as keysActions, pureState } from './reducer';\r\nimport * as keysSelectors from './selectors';\r\nimport * as sessionSelectors from 'src/containers/Session/selectors';\r\nimport { IApiParamsKeysCreate, IApiParamsKeysRemove } from 'src/lib/api/keys/types';\r\nimport { SerializedError } from '@reduxjs/toolkit';\r\nimport { generatePassword } from 'src/lib/utils/generatePassword';\r\nimport { IApiParamsKeysArchive } from 'src/lib/api/keys/archive';\r\nimport { IApiPager } from 'src/lib/api/types';\r\nimport { IApiParamsKeysList } from 'src/lib/api/keys/list';\r\nimport api from 'src/lib/api';\r\nimport { IApiParamsKeysByIds } from 'src/lib/api/keys/byIds';\r\nimport qs from 'qs';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport const useContainerKeys = () => {\r\n  const dispatch = useAppDispatch();\r\n  const pager = useSelector(keysSelectors.keysPagerSelector);\r\n  const search = useSelector(keysSelectors.keysSearchSelector);\r\n  const accessToken = useSelector(sessionSelectors.tokenSelector);\r\n  const isRouteParsed = useSelector(keysSelectors.isRouteParsedSelector);\r\n  const isEditModalOpened = useSelector(keysSelectors.isEditModalOpened);\r\n  const histroy = useHistory();\r\n  const location = useLocation();\r\n\r\n  const fetchKeysList = useCallback(\r\n    (params: IApiParamsKeysList) => {\r\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n      const refreshWhenTokenChanges = accessToken;\r\n      return dispatch(keysActions.fetchKeysList(params));\r\n    },\r\n    [dispatch, accessToken],\r\n  );\r\n\r\n  const toggleEditModal = useCallback(\r\n    (params: { isOpened: boolean }) => {\r\n      return dispatch(keysActions.toggleEditModal(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const setInitialRouteParsing = useCallback(\r\n    (params: { isParsed: boolean }) => {\r\n      return dispatch(keysActions.setInitialRouteParsing(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const fetchKeysListWatch = useCallback(() => {\r\n    const params = {\r\n      page: pager.page,\r\n      perPage: pager.perPage,\r\n      search,\r\n    };\r\n\r\n    return fetchKeysList(params);\r\n  }, [fetchKeysList, pager.page, pager.perPage, search]);\r\n\r\n  const fetchArchiveListWatch = useCallback(() => {\r\n    const params = {\r\n      page: pager.page,\r\n      perPage: pager.perPage,\r\n      search,\r\n      isArchived: true,\r\n    };\r\n\r\n    return fetchKeysList(params);\r\n  }, [fetchKeysList, pager.page, pager.perPage, search]);\r\n\r\n  const fetchCreateKey = useCallback(\r\n    async (params: Omit<IApiParamsKeysCreate, 'accessToken'>) => {\r\n      const accessToken = generatePassword(64);\r\n      const result = await dispatch(\r\n        keysActions.fetchCreateKey({\r\n          ...params,\r\n          accessToken,\r\n        }),\r\n      );\r\n\r\n      const { error } = result as { error: SerializedError };\r\n\r\n      if (error) {\r\n        return { error } as { error: SerializedError };\r\n      }\r\n\r\n      return result;\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const fetchRemoveKeyItem = useCallback(\r\n    async (params: IApiParamsKeysRemove) => {\r\n      return await dispatch(keysActions.fetchRemoveKeyItem(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const fetchArchiveKeyItem = useCallback(\r\n    (params: IApiParamsKeysArchive) => {\r\n      return dispatch(keysActions.fetchArchiveKeyItem(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const fetchRestoreKeyItem = useCallback(\r\n    (params: IApiParamsKeysArchive) => {\r\n      return dispatch(keysActions.fetchRestoreKeyItem(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const changePager = useCallback(\r\n    (params: Partial<IApiPager>) => {\r\n      return dispatch(keysActions.changePager(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const changeSearch = useCallback(\r\n    (params: Partial<{ search?: string }>) => {\r\n      return dispatch(keysActions.changeSearch(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const requestKeysList = useCallback(async (params?: IApiParamsKeysList) => {\r\n    return api.keys.list(params);\r\n  }, []);\r\n\r\n  const requestKeysByIds = useCallback(async (params: IApiParamsKeysByIds) => {\r\n    return await api.keys.byIds(params);\r\n  }, []);\r\n\r\n  const resetList = useCallback(() => {\r\n    return dispatch(keysActions.reset());\r\n  }, [dispatch]);\r\n\r\n  const routeParser = useCallback(() => {\r\n    const params = qs.parse(location.search, { ignoreQueryPrefix: true });\r\n\r\n    ['page', 'perPage'].forEach((prop) => {\r\n      const val = params[prop];\r\n      if (val !== undefined) {\r\n        const result = parseInt(val.toString());\r\n        if (!isNaN(result)) {\r\n          changePager({ [prop]: result });\r\n        }\r\n      }\r\n    });\r\n    if (params.search && typeof params.search === 'string') {\r\n      changeSearch({ search: params.search });\r\n    }\r\n    if (params.newEntry) {\r\n      toggleEditModal({ isOpened: true });\r\n    }\r\n\r\n    setInitialRouteParsing({ isParsed: true });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const routeWatcher = useCallback(() => {\r\n    const defaultPage = pureState.list.pager.page;\r\n    const defaultPerPage = pureState.list.pager.perPage;\r\n\r\n    const query = qs.stringify(\r\n      {\r\n        page: pager.page === defaultPage ? undefined : pager.page,\r\n        perPage: pager.perPage === defaultPerPage ? undefined : pager.perPage,\r\n        search: search === undefined || search.length === 0 ? undefined : search,\r\n        newEntry: isEditModalOpened ? '1' : undefined,\r\n      },\r\n      { addQueryPrefix: true },\r\n    );\r\n\r\n    if (isRouteParsed) {\r\n      histroy.push({\r\n        search: query,\r\n      });\r\n    }\r\n  }, [histroy, pager.page, pager.perPage, search, isRouteParsed, isEditModalOpened]);\r\n\r\n  return {\r\n    routeParser,\r\n    routeWatcher,\r\n    resetList,\r\n    changePager,\r\n    changeSearch,\r\n    fetchKeysList,\r\n    fetchKeysListWatch,\r\n    fetchArchiveListWatch,\r\n    fetchCreateKey,\r\n    fetchRemoveKeyItem,\r\n    fetchRestoreKeyItem,\r\n    fetchArchiveKeyItem,\r\n    requestKeysList,\r\n    requestKeysByIds,\r\n    toggleEditModal,\r\n  };\r\n};\r\n","import React, { useCallback, useState } from 'react';\r\nimport { IconButton, Snackbar, Typography } from '@material-ui/core';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport { Alert } from '@material-ui/lab';\r\n\r\nexport interface IPropsCopyBtn {\r\n  inputRef: React.RefObject<HTMLInputElement | HTMLTextAreaElement>;\r\n  message: string;\r\n}\r\n\r\nconst CopyBtn: React.FC<IPropsCopyBtn> = (props) => {\r\n  const { isCopied, handleCopy, handleCloseSnack } = useHooks(props);\r\n\r\n  return (\r\n    <>\r\n      <Snackbar\r\n        anchorOrigin={{ horizontal: 'center', vertical: 'bottom' }}\r\n        open={isCopied}\r\n        autoHideDuration={1000}\r\n        onClose={handleCloseSnack}\r\n      >\r\n        <Alert onClose={handleCloseSnack} severity=\"success\">\r\n          <Typography variant=\"h6\" component={'div'}>\r\n            {props.message}\r\n          </Typography>\r\n        </Alert>\r\n      </Snackbar>\r\n      <IconButton onClick={handleCopy}>\r\n        <FileCopyIcon fontSize={'small'} />\r\n      </IconButton>\r\n    </>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsCopyBtn) => {\r\n  const [isCopied, setCopied] = useState(false);\r\n\r\n  const handleCopy = useCallback(() => {\r\n    const input = props.inputRef.current;\r\n\r\n    if (input) {\r\n      input.select();\r\n      document.execCommand('copy');\r\n      setCopied(true);\r\n    }\r\n  }, [props.inputRef]);\r\n\r\n  const handleCloseSnack = useCallback(() => {\r\n    setCopied(false);\r\n  }, []);\r\n\r\n  return {\r\n    isCopied,\r\n    setCopied,\r\n    handleCopy,\r\n    handleCloseSnack,\r\n  };\r\n};\r\n\r\nexport default CopyBtn;\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  TextField,\r\n  InputAdornment,\r\n  IconButton,\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\r\nimport CopyBtn from 'src/components/CopyBtn';\r\n\r\nexport interface ILinkItem {\r\n  code: string;\r\n  url: string;\r\n  label: string;\r\n  isPrivate?: boolean;\r\n}\r\n\r\nexport interface IPropsUrlsList {\r\n  items: ILinkItem[];\r\n}\r\n\r\n\r\nconst UrlsList: React.FC<IPropsUrlsList> = (props) => {\r\n  const styles = useStyles();\r\n  const { inputRefs, handleFocus } = useHooks(props);\r\n\r\n  return (\r\n    <List className={styles.list}>\r\n      {props.items.map((item, i) => {\r\n        return (\r\n          <ListItem className={styles.item} key={item.code}>\r\n            <TextField\r\n              value={item.url}\r\n              label={item.label}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onFocus={handleFocus}\r\n              InputProps={{\r\n                inputRef: inputRefs[i],\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <CopyBtn inputRef={inputRefs[i]} message={`URL has been copied!`}/>\r\n                    {!item.isPrivate && (\r\n                      <IconButton\r\n                        onClick={() => {\r\n                          window.open(item.url, '_blank');\r\n                        }}\r\n                      >\r\n                        <OpenInNewIcon fontSize={'small'} />\r\n                      </IconButton>\r\n                    )}\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </ListItem>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsUrlsList) => {\r\n  const handleFocus: React.FocusEventHandler<HTMLInputElement> = useCallback(\r\n    (event) => {\r\n      event.target.select();\r\n    },\r\n    [],\r\n  );\r\n\r\n  const inputRefs = useMemo(() => props.items.map(() => React.createRef<HTMLInputElement>()), [props.items]);\r\n\r\n  return {\r\n    inputRefs,\r\n    handleFocus,\r\n  }\r\n}\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  list: {\r\n    padding: 0,\r\n    paddingBottom: 10,\r\n    width: '100%',\r\n  },\r\n  item: {\r\n    padding: 0,\r\n    paddingBottom: 10,\r\n    paddingTop: 10,\r\n  },\r\n}));\r\n\r\n\r\nexport default UrlsList;\r\n","import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogActions, Button, DialogTitle, Typography } from '@material-ui/core';\r\n\r\nexport interface IPropsApproveModal {\r\n  title?: React.ReactNode;\r\n  content?: React.ReactNode;\r\n  onSubmit?: () => void;\r\n}\r\n\r\nexport const ApproveModal: React.FC<IPropsApproveModal> = (props) => {\r\n  const [isOpen, toggleDialog] = useState(false);\r\n  const { onSubmit } = props;\r\n  const handleSubmit = () => {\r\n    if (onSubmit) {\r\n      onSubmit();\r\n    }\r\n    toggleDialog(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={isOpen} onClose={() => toggleDialog(false)}>\r\n        { props.title &&\r\n          <DialogTitle>\r\n            <Typography variant={'h4'} component={'div'}>{ props.title }</Typography>\r\n          </DialogTitle>\r\n        }\r\n        { props.content &&\r\n          <DialogContent>{ props.content }</DialogContent>\r\n        }\r\n        <DialogActions>\r\n          <Button onClick={() => toggleDialog(false)} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleSubmit} color=\"primary\" autoFocus>\r\n            Submit\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <div onClick={() => toggleDialog(true)}>{props.children}</div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ApproveModal;\r\n","import React from 'react';\r\nimport { Theme, Tooltip, TooltipProps } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/styles';\r\n\r\nconst HtmlTooltip = withStyles((theme: Theme) => ({\r\n  tooltip: {\r\n    backgroundColor: 'white',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 280,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n    padding: 20,\r\n  },\r\n}))(Tooltip);\r\n\r\nconst MessageTooltip: React.FC<TooltipProps> = (props) => {\r\n  return (\r\n    <HtmlTooltip\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default MessageTooltip;\r\n","import React from 'react';\r\nimport { colors, makeStyles } from '@material-ui/core';\r\n\r\nexport interface IPropsCodeFormat {\r\n  height?: number;\r\n}\r\n\r\nconst CodeFormat: React.FC<IPropsCodeFormat> = (props) => {\r\n  const styles = useStyles(props)();\r\n  return (\r\n      <pre className={styles.pre}><code className={styles.code}>{props.children}</code></pre>\r\n  );\r\n};\r\n\r\nconst useStyles = (props: IPropsCodeFormat) => makeStyles(() => {\r\n  return {\r\n    root: {\r\n      padding: '5px 0',\r\n    },\r\n    pre: {\r\n      display: 'block',\r\n      overflowX: 'auto',\r\n      height: () => props.height !== undefined ? props.height : 'auto',\r\n      whiteSpace: 'pre',\r\n      padding: '15px 20px',\r\n      background: colors.grey[100],\r\n    },\r\n    code: {\r\n      background: 'none',\r\n    }\r\n  }\r\n})\r\n\r\nexport default CodeFormat;\r\n","import React, { useMemo } from 'react';\r\nimport { makeStyles, Menu, MenuItem, MenuProps, Typography } from '@material-ui/core';\r\n\r\nexport interface IMenuItem {\r\n  id: string;\r\n  label: string;\r\n}\r\n\r\nexport interface IPropsPopMenu {\r\n  anchorEl: MenuProps['anchorEl'];\r\n  handleClose: () => void;\r\n  menu: IMenuItem[];\r\n  onSelectMenuItem?: <T extends IMenuItem>(x: T) => void;\r\n}\r\n\r\nconst PopMenu: React.FC<IPropsPopMenu> = (props) => {\r\n  const { menuStaticProps, styles } = useHooks();\r\n\r\n  return (\r\n    <Menu\r\n      {...menuStaticProps}\r\n      keepMounted\r\n      anchorEl={props.anchorEl}\r\n      className={styles.menu}\r\n      open={Boolean(props.anchorEl)}\r\n      onClose={props.handleClose}\r\n    >\r\n      {props.menu.map((item) => {\r\n        return (\r\n          <MenuItem\r\n            key={item.id}\r\n            onClick={() => {\r\n              if (props.onSelectMenuItem) {\r\n                props.onSelectMenuItem(item);\r\n              }\r\n              props.handleClose();\r\n            }}\r\n          >\r\n            <Typography variant={'button'}>{item.label}</Typography>\r\n          </MenuItem>\r\n        );\r\n      })}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const styles = useStyles();\r\n\r\n  const menuStaticProps = useMemo((): Partial<MenuProps> => {\r\n    return {\r\n      anchorOrigin: { horizontal: 'right', vertical: 'top' },\r\n      transformOrigin: { horizontal: 'right', vertical: 'top' },\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    styles,\r\n    menuStaticProps,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  menu: {\r\n    width: 150,\r\n  },\r\n}));\r\n\r\nexport default PopMenu;\r\n","import React from 'react';\r\nimport {\r\n  Button,\r\n  InputAdornment,\r\n  InputProps,\r\n  TextField,\r\n  TextFieldProps,\r\n} from '@material-ui/core';\r\nimport PopMenu from '../PopMenu';\r\n\r\nexport interface IMenuItem {\r\n  id: string;\r\n  label: string;\r\n}\r\n\r\nexport interface IPropsTextFieldWithOptions {\r\n  menu?: IMenuItem[];\r\n  currentMenuLabel?: React.ReactNode;\r\n  fieldProps?: TextFieldProps;\r\n  inputProps?: InputProps;\r\n  onSelectMenuItem?: <T extends IMenuItem>(i: T) => void;\r\n  disabled?: boolean;\r\n  beforeOptions?: React.ReactNode;\r\n  afterOptions?: React.ReactNode;\r\n}\r\n\r\nconst TextFieldWithOptions: React.FC<IPropsTextFieldWithOptions> = (props) => {\r\n  const { menu, currentMenuLabel, fieldProps, inputProps, disabled } = props;\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n\r\n  const handleOpenUnitMenu = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleCloseUnitMenu = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TextField\r\n        fullWidth\r\n        {...fieldProps}\r\n        variant=\"outlined\"\r\n        disabled={disabled}\r\n        InputProps={{\r\n          endAdornment: currentMenuLabel ? (\r\n            <InputAdornment position=\"end\">\r\n              {props.beforeOptions}\r\n              <Button size={'small'} disabled={disabled} onClick={handleOpenUnitMenu}>\r\n                {currentMenuLabel}\r\n              </Button>\r\n              {props.afterOptions}\r\n            </InputAdornment>\r\n          ) : null,\r\n          ...inputProps,\r\n        }}\r\n      />\r\n      {menu && (\r\n        <PopMenu\r\n          anchorEl={anchorEl}\r\n          menu={menu}\r\n          onSelectMenuItem={props.onSelectMenuItem}\r\n          handleClose={handleCloseUnitMenu}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TextFieldWithOptions;\r\n","import { useCallback } from 'react';\r\nimport { IApiParamsKeysPreview } from 'src/lib/api/keys/preview';\r\nimport { useAppDispatch } from 'src/store';\r\n\r\nimport { actions as keyPreviewActions } from './reducer';\r\nimport { IStoreKeyPreview } from './types';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport const useContainerPreviewKey = () => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const toggleModal = useCallback(\r\n    (isOpen?: boolean) => {\r\n      dispatch(keyPreviewActions.toggleModal({ isOpen }));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const fetchKeyPreview = useCallback(\r\n    (params: IApiParamsKeysPreview) => {\r\n      return dispatch(keyPreviewActions.fetchKeyPreview(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const setPreviewParams = useCallback((params: IStoreKeyPreview['params']) => {\r\n    dispatch(keyPreviewActions.setParams(params));\r\n  }, [dispatch])\r\n\r\n  const openKeyPreview = useCallback(\r\n    async (apiParams: IApiParamsKeysPreview, previewParams?: IStoreKeyPreview['params']) => {\r\n      toggleModal(true);\r\n      previewParams && setPreviewParams(previewParams);\r\n      await fetchKeyPreview(apiParams);\r\n    },\r\n    [fetchKeyPreview, toggleModal, setPreviewParams],\r\n  );\r\n\r\n  return { toggleModal, fetchKeyPreview, openKeyPreview, setPreviewParams };\r\n};\r\n","import {\r\n  Grid,\r\n  InputAdornment,\r\n  InputProps,\r\n  Link,\r\n  TextField,\r\n  TextFieldProps,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport React, { useMemo, useState } from 'react';\r\nimport { useRef } from 'react';\r\nimport { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport CodeFormat from 'src/components/CodeFormat';\r\nimport TextFieldWithOptions from 'src/components/TextFieldWithOptions';\r\nimport { privateHostSelector } from 'src/containers/Session/selectors';\r\nimport CopyBtn from 'src/components/CopyBtn';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { useContainerPreviewKey } from 'src/containers/KeyPreview/hooks';\r\n\r\nexport interface IPrivateKeyItem {\r\n  accessCode: string;\r\n  code: string;\r\n  id: number;\r\n}\r\n\r\nexport interface IPropsPrivateUrls {\r\n  item: IPrivateKeyItem;\r\n}\r\n\r\nexport interface IKeyFormat {\r\n  id: 'jwk' | 'pem' | 'jwks';\r\n  label: string;\r\n}\r\n\r\nexport const KEY_FORMATS: IKeyFormat[] = [\r\n  { id: 'jwk', label: 'JWK' },\r\n  { id: 'jwks', label: 'JWKs' },\r\n  { id: 'pem', label: 'PEM' },\r\n];\r\n\r\nconst PrivateUrls: React.FC<IPropsPrivateUrls> = (props) => {\r\n  const {\r\n    fieldProps,\r\n    inputProps,\r\n    format,\r\n    targetUrl,\r\n    urlRef,\r\n    accessRef,\r\n    handleSetFormat,\r\n    handleOpenPreviewModal,\r\n    handleFocus,\r\n  } = useHooks(props);\r\n  const styles = useStyles();\r\n\r\n  const { item } = props;\r\n\r\n  return (\r\n    <Grid container spacing={3}>\r\n      <Grid item xs={12}>\r\n        <TextField\r\n          fullWidth\r\n          label=\"Access key\"\r\n          variant=\"outlined\"\r\n          value={item.accessCode}\r\n          onFocus={handleFocus}\r\n          InputProps={{\r\n            inputRef: accessRef,\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <CopyBtn inputRef={accessRef} message={`URL has been copied!`} />\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <TextFieldWithOptions\r\n          menu={KEY_FORMATS}\r\n          currentMenuLabel={format.label}\r\n          onSelectMenuItem={handleSetFormat}\r\n          fieldProps={fieldProps}\r\n          inputProps={inputProps}\r\n          afterOptions={<CopyBtn inputRef={urlRef} message={`URL has been copied!`} />}\r\n        />\r\n      </Grid>\r\n      {item.accessCode && (\r\n        <Grid item xs={12}>\r\n          <div className={styles.exampleMessage}>\r\n            <Typography>Key can be fetched via POST with access code.</Typography>\r\n            <Link onClick={handleOpenPreviewModal}>Preview</Link>\r\n          </div>\r\n          <CodeFormat>\r\n            {`curl -d '{ \"accessToken\":\"${item.accessCode}\" }' -H \"Content-Type: application/json\" -X POST ${targetUrl}`}\r\n          </CodeFormat>\r\n        </Grid>\r\n      )}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsPrivateUrls) => {\r\n  const [formatId, setFormat] = useState<'jwk' | 'jwks' | 'pem'>(KEY_FORMATS[0].id);\r\n  const { openKeyPreview } = useContainerPreviewKey();\r\n\r\n  const format = useMemo(() => {\r\n    return KEY_FORMATS.find((i) => i.id === formatId) || KEY_FORMATS[0];\r\n  }, [formatId]);\r\n\r\n  const keysHost = useSelector(privateHostSelector) || '';\r\n\r\n  const urlRef = useRef<HTMLInputElement>(null);\r\n  const accessRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFocus: React.FocusEventHandler<HTMLInputElement> = useCallback((event) => {\r\n    event.target.select();\r\n  }, []);\r\n\r\n  const fieldProps: TextFieldProps = useMemo(() => {\r\n    return {\r\n      label: 'Target URL',\r\n      onFocus: handleFocus,\r\n    };\r\n  }, [handleFocus]);\r\n\r\n  const targetUrl = useMemo(() => {\r\n    return `${keysHost}/entry/private/${format.id}/${props.item.code}`;\r\n  }, [keysHost, format.id, props.item.code]);\r\n\r\n  const inputProps: InputProps = useMemo(() => {\r\n    return {\r\n      value: targetUrl,\r\n      inputRef: urlRef,\r\n    };\r\n  }, [targetUrl]);\r\n\r\n  const handleSetFormat = useCallback(\r\n    (i: { id: string | number }) => {\r\n      if (typeof i.id === 'string' && ['jwk', 'jwks', 'pem'].includes(i.id)) {\r\n        setFormat(i.id as 'jwk' | 'jwks' | 'pem');\r\n      }\r\n    },\r\n    [setFormat],\r\n  );\r\n\r\n  const handleOpenPreviewModal = useCallback(() => {\r\n    return openKeyPreview(\r\n      { id: props.item.id, isByEntry: true },\r\n      { privacy: 'private', format: formatId },\r\n    );\r\n  }, [openKeyPreview, props.item.id, formatId]);\r\n\r\n  return {\r\n    keysHost,\r\n    inputProps,\r\n    formatId,\r\n    fieldProps,\r\n    format,\r\n    targetUrl,\r\n    urlRef,\r\n    accessRef,\r\n    setFormat,\r\n    handleFocus,\r\n    handleSetFormat,\r\n    handleOpenPreviewModal,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => {\r\n  return {\r\n    exampleMessage: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n    },\r\n  };\r\n});\r\n\r\nexport default PrivateUrls;\r\n","import React, { useCallback } from 'react';\r\nimport moment from 'moment';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Divider,\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  CardActions,\r\n  Button,\r\n  makeStyles,\r\n  Grid,\r\n} from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMoreOutlined';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\n\r\nimport UrlsList from 'src/components/UrlsList';\r\nimport ApproveModal from 'src/components/ApproveModal';\r\nimport { publicHostSelector } from 'src/containers/Session/selectors';\r\nimport MessageTooltip from 'src/components/MessageTooltip';\r\nimport PrivateUrls from '../PrivateUrls';\r\nimport { useContainerKeys } from 'src/containers/Keys/hooks';\r\nimport { useMemo } from 'react';\r\n\r\nexport interface IKeyItemData {\r\n  id: number;\r\n  name: string;\r\n  code: string;\r\n  accessCode: string;\r\n  rotateInterval: number | null;\r\n  archivedAt: number | null;\r\n}\r\n\r\nexport interface IKeyItemProps {\r\n  data?: IKeyItemData;\r\n}\r\n\r\nconst KeyItem: React.FC<IKeyItemProps> = (props) => {\r\n  const styles = useStyles();\r\n  const { deleteItem, archiveItem, restoreItem, rotation, publicUrls } = useHooks(props);\r\n  const { data } = props;\r\n\r\n  if (!data) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Grid container spacing={2} justify={'space-between'}>\r\n          <Grid item>\r\n            <Typography variant={'caption'}>Name</Typography>\r\n            <Typography variant={'h5'}>{data.name}</Typography>\r\n          </Grid>\r\n          <Grid item className={styles.codeHolder}>\r\n            <Typography variant={'caption'}>Unique code</Typography>\r\n            <Typography variant={'h5'}>{data.code}</Typography>\r\n          </Grid>\r\n        </Grid>\r\n        <Divider className={styles.divider} />\r\n        <Typography variant={'caption'}>\r\n          {!data.rotateInterval ? 'Non rotatable key' : rotation}\r\n        </Typography>\r\n        <Divider className={styles.divider} />\r\n        <Accordion>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant={'h6'}>Public key</Typography>\r\n            <MessageTooltip\r\n              placement=\"top-start\"\r\n              title={\r\n                <Typography gutterBottom variant={'body1'} color={'textPrimary'}>\r\n                  {`Anyone can get public key by GET request in formats listed below. Rotatable response contain \"expires\" header.`}\r\n                </Typography>\r\n              }\r\n            >\r\n              <HelpIcon className={styles.tooltip} color={'primary'} fontSize={'small'} />\r\n            </MessageTooltip>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <div style={{ flexGrow: 1 }}>\r\n              <UrlsList items={publicUrls} />\r\n            </div>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n        <Accordion>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant={'h6'}>Private key</Typography>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <div className={styles.privateWrap}>\r\n              <PrivateUrls item={data} />\r\n            </div>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n      </CardContent>\r\n      <CardActions className={styles.actions}>\r\n        {data.archivedAt !== null && (\r\n          <>\r\n            <ApproveModal\r\n              title={'Are you sure want to delete key?'}\r\n              content={'Every associated keys will be unavailable'}\r\n              onSubmit={() => deleteItem(data.id)}\r\n            >\r\n              <Button size=\"small\">Delete</Button>\r\n            </ApproveModal>\r\n            <Button size=\"small\" onClick={() => restoreItem(data.id)}>\r\n              Restore\r\n            </Button>\r\n          </>\r\n        )}\r\n        {data.archivedAt === null && (\r\n          <ApproveModal\r\n            title={'Are you sure want to archive entry in storage?'}\r\n            content={\r\n              'Associated keys will be marked as archived and unavailable. You can restore entry from the archive at any time.'\r\n            }\r\n            onSubmit={() => archiveItem(data.id)}\r\n          >\r\n            <Button size=\"small\">Archive</Button>\r\n          </ApproveModal>\r\n        )}\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IKeyItemProps) => {\r\n  const publicHost = useSelector(publicHostSelector);\r\n  const { fetchRemoveKeyItem, fetchArchiveKeyItem, fetchRestoreKeyItem } = useContainerKeys();\r\n  const { data } = props;\r\n  const rotateInterval = data ? data.rotateInterval : null;\r\n  const code = data ? data.code : null;\r\n\r\n  const publicUrls = useMemo(() => {\r\n    if (publicHost === undefined || code === null) {\r\n      return [];\r\n    }\r\n    return [\r\n      { code: 'jwk', url: `${publicHost}/entry/public/jwk/${code}`, label: 'JWK' },\r\n      { code: 'jwks', url: `${publicHost}/entry/public/jwks/${code}`, label: 'JWKs' },\r\n      { code: 'pem', url: `${publicHost}/entry/public/pem/${code}`, label: 'PEM' },\r\n    ];\r\n  }, [code, publicHost]);\r\n\r\n  const deleteItem = useCallback(\r\n    (id: number) => {\r\n      return fetchRemoveKeyItem({ id });\r\n    },\r\n    [fetchRemoveKeyItem],\r\n  );\r\n\r\n  const archiveItem = useCallback(\r\n    (id: number) => {\r\n      return fetchArchiveKeyItem({ id });\r\n    },\r\n    [fetchArchiveKeyItem],\r\n  );\r\n\r\n  const restoreItem = useCallback(\r\n    (id: number) => {\r\n      return fetchRestoreKeyItem({ id });\r\n    },\r\n    [fetchRestoreKeyItem],\r\n  );\r\n\r\n  const rotation = useMemo(() => {\r\n    return rotateInterval && `Rotation period: ${moment.duration(rotateInterval, 's').humanize()}`;\r\n  }, [rotateInterval]);\r\n\r\n  return {\r\n    host: publicHost,\r\n    rotation,\r\n    publicUrls,\r\n    deleteItem,\r\n    archiveItem,\r\n    restoreItem,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  actions: {\r\n    justifyContent: 'flex-end',\r\n  },\r\n  privateWrap: {\r\n    width: '100%',\r\n  },\r\n  divider: {\r\n    marginTop: 10,\r\n    marginBottom: 10,\r\n  },\r\n  tooltip: {\r\n    marginLeft: 10,\r\n    opacity: 0.2,\r\n    '&:hover': {\r\n      opacity: 1,\r\n    },\r\n  },\r\n  codeHolder: {\r\n    textAlign: 'right',\r\n  },\r\n}));\r\n\r\nexport default KeyItem;\r\n","import { Box, MenuItem, Select } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid/Grid';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport React, { useCallback } from 'react';\r\n\r\nexport interface IPropsPerPageSelect {\r\n  current: number;\r\n  options: number[];\r\n  onSelect?: (val: number) => void;\r\n}\r\n\r\nconst PerPageSelect: React.FC<IPropsPerPageSelect> = (props) => {\r\n  const styles = useStyles();\r\n  const { current, options } = props;\r\n  const { handleChange } = useHooks(props);\r\n\r\n  return (\r\n    <Box>\r\n      <Grid container alignItems=\"center\">\r\n        <Grid item className={styles.label}>\r\n          Items per page:\r\n        </Grid>\r\n        <Grid item>\r\n          <Select value={current} onChange={handleChange}>\r\n            {options.map((val) => {\r\n              return (\r\n                <MenuItem key={val} value={val}>\r\n                  {val}\r\n                </MenuItem>\r\n              );\r\n            })}\r\n          </Select>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsPerPageSelect) => {\r\n  const { onSelect } = props;\r\n\r\n  const handleChange = useCallback(\r\n    (\r\n      e: React.ChangeEvent<{\r\n        name?: string | undefined;\r\n        value: unknown;\r\n      }>,\r\n    ) => {\r\n      onSelect && onSelect(e.target.value as number);\r\n    },\r\n    [onSelect],\r\n  );\r\n\r\n  return {\r\n    handleChange,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => {\r\n  return {\r\n    label: {\r\n      marginRight: 10,\r\n      fontSize: 12,\r\n    },\r\n  };\r\n});\r\n\r\nexport default PerPageSelect;\r\n","import React, { ChangeEvent, useCallback, useMemo } from 'react';\r\nimport { InputAdornment, TextField, TextFieldProps } from '@material-ui/core';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport debounce from 'lodash.debounce';\r\n\r\nexport type IPropsSearchInput = TextFieldProps & {\r\n  onThrottledChange?: (val: string) => void;\r\n};\r\n\r\nconst SearchInput: React.FC<IPropsSearchInput> = (props) => {\r\n  const { InputPropsMemo, restProps, handleChange } = useHooks(props);\r\n  return (\r\n    <>\r\n      <TextField {...restProps} onChange={handleChange} size=\"small\" variant={'outlined'} InputProps={InputPropsMemo} />\r\n    </>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsSearchInput) => {\r\n  const { InputProps, onChange, onThrottledChange, ...restProps } = props;\r\n  const InputPropsMemo = useMemo(() => {\r\n    return {\r\n      startAdornment: (\r\n        <InputAdornment position=\"start\">\r\n          <SearchIcon />\r\n        </InputAdornment>\r\n      ),\r\n      ...InputProps,\r\n    };\r\n  }, [InputProps]);\r\n\r\n  const throttledChange = useCallback(debounce((val: string)=> {\r\n    if (onThrottledChange) {\r\n      onThrottledChange(val)\r\n    }\r\n  }, 500), [onThrottledChange]);\r\n\r\n  const handleChange = useCallback((event: ChangeEvent<HTMLInputElement>) => {\r\n    const val = event.target.value;\r\n    if (onChange) {\r\n      onChange(event);\r\n    }\r\n    throttledChange(val);\r\n  }, [throttledChange, onChange]);\r\n\r\n  return {\r\n    InputPropsMemo,\r\n    restProps,\r\n    handleChange,\r\n  };\r\n};\r\n\r\nexport default SearchInput;\r\n","import React, { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Grid, Button, makeStyles, Box, Typography } from '@material-ui/core';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { Pagination } from '@material-ui/lab';\r\n\r\nimport {\r\n  isKeyListEmpty,\r\n  keysPagerOptionsSelector,\r\n  keysRequestSelector,\r\n  keysSearchSelector,\r\n} from 'src/containers/Keys/selectors';\r\nimport { useContainerKeys } from 'src/containers/Keys/hooks';\r\nimport * as keysSelectors from 'src/containers/Keys/selectors';\r\nimport KeyItem from 'src/components/KeyItem';\r\nimport PerPageSelect from 'src/components/PerPageSelect';\r\nimport SearchInput from 'src/components/SearchInput';\r\n\r\nexport interface IPropsKeysList {\r\n  archive?: boolean;\r\n}\r\n\r\nconst KeysList: React.FC<IPropsKeysList> = (props) => {\r\n  const styles = useStyles();\r\n  const { loading, data, error, pager } = useSelector(keysRequestSelector);\r\n  const pagerOptions = useSelector(keysPagerOptionsSelector);\r\n  const search = useSelector(keysSearchSelector);\r\n  const isEmpty = useSelector(isKeyListEmpty);\r\n\r\n  const {\r\n    handleModalToggle,\r\n    handlePagerChange,\r\n    handleChangePerPage,\r\n    handleChangeSearch,\r\n  } = useHooks();\r\n\r\n  if (error) {\r\n    return <Alert severity=\"error\">{error}</Alert>;\r\n  }\r\n\r\n  return (\r\n    <Box className={styles.wrap}>\r\n      <Grid container spacing={2}>\r\n        <Grid item container spacing={2} xs={12} alignItems={'center'}>\r\n          {!props.archive && (\r\n            <Grid item>\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={<AddCircleOutlineIcon />}\r\n                onClick={handleModalToggle}\r\n              >\r\n                Add key entry\r\n              </Button>\r\n            </Grid>\r\n          )}\r\n          {!isEmpty && (\r\n            <Grid item>\r\n              <SearchInput\r\n                defaultValue={search}\r\n                onThrottledChange={handleChangeSearch}\r\n                placeholder={'Search by name...'}\r\n              />\r\n            </Grid>\r\n          )}\r\n        </Grid>\r\n        {!loading && (\r\n          <>\r\n            {isEmpty && !props.archive && (\r\n              <Grid item xs={12} className={styles.noItems}>\r\n                <Typography variant=\"h5\">There is no key entries. Add your first one!</Typography>\r\n              </Grid>\r\n            )}\r\n            {isEmpty && props.archive && (\r\n              <Grid item xs={12} className={styles.noItems}>\r\n                <Typography variant=\"h5\">Archive is empty!</Typography>\r\n              </Grid>\r\n            )}\r\n            {data.items.length > 0 && (\r\n              <Grid item xs={12}>\r\n                <Grid container spacing={2}>\r\n                  {data.items.map((item) => {\r\n                    return (\r\n                      <Grid item key={item.id} xs={6}>\r\n                        <KeyItem data={item} />\r\n                      </Grid>\r\n                    );\r\n                  })}\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n          </>\r\n        )}\r\n        {pager.totalPages !== undefined && pager.totalPages > 0 && (\r\n          <Grid container item xs={12} alignItems=\"center\">\r\n            <Grid item>\r\n              <PerPageSelect\r\n                current={pager.perPage}\r\n                options={pagerOptions}\r\n                onSelect={handleChangePerPage}\r\n              />\r\n            </Grid>\r\n            <Grid item className={styles.pagerHolder}>\r\n              {pager.totalPages > 1 && (\r\n                <Pagination\r\n                  onChange={handlePagerChange}\r\n                  count={pager.totalPages}\r\n                  page={pager.page}\r\n                />\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const isFormOpened = useSelector(keysSelectors.isEditModalOpened);\r\n  const { changePager, changeSearch, toggleEditModal } = useContainerKeys();\r\n\r\n  const handleModalToggle = useCallback(() => {\r\n    toggleEditModal({ isOpened: !isFormOpened });\r\n  }, [isFormOpened, toggleEditModal]);\r\n\r\n  const handlePagerChange = useCallback(\r\n    (_event: React.ChangeEvent<unknown>, value: number) => {\r\n      return changePager({ page: value });\r\n    },\r\n    [changePager],\r\n  );\r\n\r\n  const handleChangePerPage = useCallback(\r\n    (val: number) => {\r\n      return changePager({ perPage: val });\r\n    },\r\n    [changePager],\r\n  );\r\n\r\n  const handleChangeSearch = useCallback(\r\n    (val: string) => {\r\n      return changeSearch({ search: val });\r\n    },\r\n    [changeSearch],\r\n  );\r\n\r\n  return {\r\n    handleChangePerPage,\r\n    handleChangeSearch,\r\n    handleModalToggle,\r\n    handlePagerChange,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => {\r\n  return {\r\n    pagerHolder: {\r\n      marginLeft: 'auto',\r\n    },\r\n    searchHolder: {\r\n      marginLeft: 'auto',\r\n      marginTop: 'auto',\r\n    },\r\n    wrap: {\r\n      maxWidth: '100%',\r\n      flexGrow: 1,\r\n    },\r\n    noItems: {\r\n      marginTop: 20,\r\n    },\r\n  };\r\n});\r\n\r\nexport default KeysList;\r\n","import { createSelector } from 'reselect';\r\nimport { IStore } from 'src/reducer';\r\nimport { IStoreKeyPreview } from './types';\r\n\r\nexport const containerState = (state: IStore): IStoreKeyPreview => state.keyPreview;\r\nexport const modal = createSelector(containerState, (state) => state.modal);\r\nexport const details = createSelector(containerState, (state) => state.details);\r\nexport const params = createSelector(containerState, (state) => state.params);\r\nexport const availFormats = createSelector(containerState, (state) => state.availFormats);\r\nexport const availPrivacy = createSelector(containerState, (state) => state.availPrivacy);\r\n","import React, { useCallback, useMemo, useRef, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { Button, Grid, makeStyles } from '@material-ui/core';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport CodeFormat from 'src/components/CodeFormat';\r\nimport CopyBtn from 'src/components/CopyBtn';\r\nimport { useContainerPreviewKey } from 'src/containers/KeyPreview/hooks';\r\nimport * as keyPreviewSelectors from 'src/containers/KeyPreview/selectors';\r\nimport PopMenu, { IMenuItem } from '../PopMenu';\r\nimport moment from 'moment';\r\n\r\nexport interface IPropsKeyPreview {}\r\n\r\nconst KeyPreview: React.FC<IPropsKeyPreview> = () => {\r\n  const styles = useStyles();\r\n\r\n  const {\r\n    availFormats,\r\n    availPrivacy,\r\n    keyData,\r\n    previewParams,\r\n    keyInputRef,\r\n    formatsBtnRef,\r\n    privacyBtnRef,\r\n    targetKey,\r\n    isFormatsMenuOpen,\r\n    isPrivacyMenuOpen,\r\n    handleFormatsMenuClose,\r\n    handleFormatsMenuOpen,\r\n    handlePrivacyMenuClose,\r\n    handlePrivacyMenuOpen,\r\n    handleFormatsMenuItemSelect,\r\n    handlePrivacyMenuItemSelect,\r\n    handleDialogClose,\r\n  } = useHooks();\r\n\r\n  if (keyData.error || keyData.data === undefined) {\r\n    return <div>Data error in KeyPreview component</div>;\r\n  }\r\n\r\n  if (targetKey === undefined) {\r\n    return <div>Key data unavailable</div>;\r\n  }\r\n\r\n  const formatString = previewParams.format?.toUpperCase();\r\n  const privacyString = previewParams.privacy?.toUpperCase();\r\n  const activatesAt = moment.unix(keyData.data.activatesAt).format('LLL');\r\n  const expiresAt = keyData.data.expiresAt && moment.unix(keyData.data.expiresAt).format('LLL');\r\n\r\n  return (\r\n    <Paper className={styles.wrap}>\r\n      <PopMenu\r\n        anchorEl={isFormatsMenuOpen ? formatsBtnRef.current : null}\r\n        handleClose={handleFormatsMenuClose}\r\n        onSelectMenuItem={handleFormatsMenuItemSelect}\r\n        menu={availFormats}\r\n      />\r\n      <PopMenu\r\n        anchorEl={isPrivacyMenuOpen ? privacyBtnRef.current : null}\r\n        handleClose={handlePrivacyMenuClose}\r\n        onSelectMenuItem={handlePrivacyMenuItemSelect}\r\n        menu={availPrivacy}\r\n      />\r\n      <Grid container spacing={2}>\r\n        <Grid container item xs={12} alignItems={'center'}>\r\n          <Grid item xs={6}>\r\n            <Typography variant={'h3'}>Key preview</Typography>\r\n          </Grid>\r\n          <Grid container item xs={6} justify={'flex-end'}>\r\n            <Button size={'small'} ref={privacyBtnRef} onClick={handlePrivacyMenuOpen}>\r\n              {privacyString}\r\n            </Button>\r\n            <Button size={'small'} ref={formatsBtnRef} onClick={handleFormatsMenuOpen}>\r\n              {formatString}\r\n            </Button>\r\n            <div className={styles.copyHolder}>\r\n              <textarea readOnly ref={keyInputRef} value={targetKey} className={styles.keyInput} />\r\n              <CopyBtn inputRef={keyInputRef} message={'Key has been copied!'} />\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item container xs={12} justify=\"flex-start\" spacing={2}>\r\n          <Grid item>\r\n            <Typography variant=\"caption\">Activates at: {activatesAt}</Typography>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography variant=\"caption\">\r\n              {expiresAt ? `Expires at: ${expiresAt}` : `No expiration`}\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <CodeFormat>{targetKey}</CodeFormat>\r\n        </Grid>\r\n        <Grid item container xs={12} justify={'flex-end'}>\r\n          <Button onClick={handleDialogClose}>Close</Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport const KeyPreviewModal: React.FC<IPropsKeyPreview> = (props) => {\r\n  const { modalState, handleDialogClose } = useHooks();\r\n\r\n  return (\r\n    <Dialog open={Boolean(modalState.isOpen)} onClose={handleDialogClose} {...props}>\r\n      <KeyPreview />\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const keyData = useSelector(keyPreviewSelectors.details);\r\n  const modalState = useSelector(keyPreviewSelectors.modal);\r\n  const previewParams = useSelector(keyPreviewSelectors.params);\r\n  const availFormats = useSelector(keyPreviewSelectors.availFormats);\r\n  const availPrivacy = useSelector(keyPreviewSelectors.availPrivacy);\r\n\r\n  const [isFormatsMenuOpen, toggleFormatsMenu] = useState(false);\r\n  const [isPrivacyMenuOpen, togglePrivacyMenu] = useState(false);\r\n\r\n  const { setPreviewParams, toggleModal } = useContainerPreviewKey();\r\n\r\n  const handleDialogClose = useCallback(() => {\r\n    toggleModal(false);\r\n  }, [toggleModal]);\r\n\r\n  const handleFormatsMenuClose = useCallback(() => {\r\n    toggleFormatsMenu(false);\r\n  }, [toggleFormatsMenu]);\r\n\r\n  const handleFormatsMenuOpen = useCallback(() => {\r\n    toggleFormatsMenu(true);\r\n  }, [toggleFormatsMenu]);\r\n\r\n  const handlePrivacyMenuClose = useCallback(() => {\r\n    togglePrivacyMenu(false);\r\n  }, [togglePrivacyMenu]);\r\n\r\n  const handlePrivacyMenuOpen = useCallback(() => {\r\n    togglePrivacyMenu(true);\r\n  }, [togglePrivacyMenu]);\r\n\r\n  const handleFormatsMenuItemSelect = useCallback(\r\n    (item: IMenuItem) => {\r\n      setPreviewParams({ format: item.id as 'jwk' | 'pem' });\r\n    },\r\n    [setPreviewParams],\r\n  );\r\n\r\n  const handlePrivacyMenuItemSelect = useCallback(\r\n    (item: IMenuItem) => {\r\n      setPreviewParams({ privacy: item.id as 'private' | 'public' });\r\n    },\r\n    [setPreviewParams],\r\n  );\r\n\r\n  const keyInputRef = useRef<HTMLTextAreaElement>(null);\r\n  const formatsBtnRef = useRef<HTMLButtonElement>(null);\r\n  const privacyBtnRef = useRef<HTMLButtonElement>(null);\r\n\r\n  const targetKey = useMemo(() => {\r\n    if (keyData.data === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    const { publicKey, privateKey } = keyData.data;\r\n    const isPrivate = previewParams.privacy === 'private';\r\n    const targetKeys = isPrivate ? privateKey : publicKey;\r\n\r\n    if (targetKeys === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    switch (previewParams.format) {\r\n      case 'pem':\r\n        return targetKeys.pem;\r\n      default:\r\n        return JSON.stringify(targetKeys.jwk, null, 2);\r\n    }\r\n  }, [keyData.data, previewParams.format, previewParams.privacy]);\r\n\r\n  return {\r\n    availFormats,\r\n    availPrivacy,\r\n    isPrivacyMenuOpen,\r\n    isFormatsMenuOpen,\r\n    targetKey,\r\n    modalState,\r\n    keyData,\r\n    previewParams,\r\n    keyInputRef,\r\n    privacyBtnRef,\r\n    formatsBtnRef,\r\n    handleFormatsMenuClose,\r\n    handleFormatsMenuOpen,\r\n    handlePrivacyMenuClose,\r\n    handlePrivacyMenuOpen,\r\n    handleFormatsMenuItemSelect,\r\n    handlePrivacyMenuItemSelect,\r\n    handleDialogClose,\r\n    toggleFormatsMenu,\r\n    togglePrivacyMenu,\r\n    togglePreviewModal: toggleModal,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => {\r\n  return {\r\n    wrap: {\r\n      width: '600px',\r\n      padding: '20px',\r\n    },\r\n    copyHolder: {\r\n      position: 'relative',\r\n    },\r\n    keyInput: {\r\n      position: 'absolute',\r\n      overflow: 'hidden',\r\n      width: 10,\r\n      height: 20,\r\n      left: 15,\r\n      top: 15,\r\n      opacity: 0,\r\n    },\r\n  };\r\n});\r\n\r\nexport default KeyPreview;\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  Typography,\r\n  CardContent,\r\n  Grid,\r\n  TextField,\r\n  makeStyles,\r\n  Button,\r\n  CircularProgress,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Dialog,\r\n} from '@material-ui/core';\r\nimport Inputmask from 'inputmask';\r\nimport { Formik, Form, Field, FieldProps, FormikProps, FormikErrors, FormikHelpers } from 'formik';\r\nimport { SerializedError } from '@reduxjs/toolkit';\r\n\r\nimport Message from 'src/components/Message';\r\nimport TextFieldWithOptions from 'src/components/TextFieldWithOptions';\r\nimport { useContainerKeys } from 'src/containers/Keys/hooks';\r\nimport * as keysSelectors from 'src/containers/Keys/selectors';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst unitOptions = {\r\n  h: 'hours',\r\n  d: 'days',\r\n  w: 'weeks',\r\n  m: 'months',\r\n};\r\n\r\nexport interface IKeyEntryFormValues {\r\n  name: string;\r\n  code: string;\r\n  rotation: string;\r\n  rotatable: string;\r\n  server?: string;\r\n  unit: keyof typeof unitOptions;\r\n}\r\n\r\nexport interface IPropsKeyEntryForm {\r\n  onSubmit?: () => void;\r\n}\r\n\r\nconst defaultInitialValues: IKeyEntryFormValues = {\r\n  name: '',\r\n  code: '',\r\n  rotation: '',\r\n  unit: 'd',\r\n  rotatable: '1',\r\n};\r\n\r\nconst KeyEntryForm: React.FC<IPropsKeyEntryForm> = (props) => {\r\n  const styles = useStyles();\r\n  const { menuItems, validate, handleSubmit } = useHooks(props);\r\n\r\n  return (\r\n    <Card style={{ width: 400 }}>\r\n      <CardHeader title={<Typography variant=\"h3\">Add new key entry</Typography>} />\r\n      <CardContent>\r\n        <Formik initialValues={defaultInitialValues} validate={validate} onSubmit={handleSubmit}>\r\n          {(formikProps: FormikProps<IKeyEntryFormValues>) => {\r\n            const loading = formikProps.isSubmitting;\r\n            return (\r\n              <Form>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <Field name=\"name\">\r\n                      {(params: FieldProps<string>) => {\r\n                        const { field, meta } = params;\r\n                        return (\r\n                          <TextField\r\n                            className={styles.textfield}\r\n                            error={Boolean(meta.touched && meta.error)}\r\n                            label=\"Choose name\"\r\n                            variant=\"outlined\"\r\n                            {...field}\r\n                          />\r\n                        );\r\n                      }}\r\n                    </Field>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <Field name=\"code\">\r\n                      {(params: FieldProps<string>) => {\r\n                        const { field, meta } = params;\r\n                        return (\r\n                          <TextField\r\n                            className={styles.textfield}\r\n                            error={Boolean(meta.touched && meta.error)}\r\n                            label=\"Unique code\"\r\n                            variant=\"outlined\"\r\n                            InputProps={{\r\n                              inputRef: (el) => {\r\n                                if (el) {\r\n                                  codeMask.mask(el);\r\n                                }\r\n                              },\r\n                            }}\r\n                            {...field}\r\n                          />\r\n                        );\r\n                      }}\r\n                    </Field>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <Field name=\"rotation\">\r\n                      {(params: FieldProps<string>) => {\r\n                        const { field, meta } = params;\r\n                        const isEnabled = formikProps.values.rotatable === '1';\r\n                        return (\r\n                          <TextFieldWithOptions\r\n                            menu={menuItems}\r\n                            onSelectMenuItem={(item) => {\r\n                              if (typeof item.id === 'string') {\r\n                                formikProps.setFieldValue('unit', item.id);\r\n                              }\r\n                            }}\r\n                            disabled={!isEnabled}\r\n                            currentMenuLabel={unitOptions[formikProps.values.unit]}\r\n                            inputProps={{\r\n                              inputRef: (el) => {\r\n                                if (el) {\r\n                                  digitMask.mask(el);\r\n                                }\r\n                              },\r\n                            }}\r\n                            fieldProps={{\r\n                              error: Boolean(meta.touched && meta.error),\r\n                              label: `Rotation interval`,\r\n                              ...field,\r\n                            }}\r\n                          />\r\n                        );\r\n                      }}\r\n                    </Field>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <Field name=\"rotatable\">\r\n                      {(params: FieldProps<string>) => {\r\n                        const { field } = params;\r\n                        return (\r\n                          <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                                checked={field.value === '1'}\r\n                                onChange={(_, checked) => {\r\n                                  formikProps.setFieldValue('rotatable', checked ? '1' : '0');\r\n                                }}\r\n                                name=\"checkedB\"\r\n                                color=\"primary\"\r\n                              />\r\n                            }\r\n                            label=\"Enable rotation\"\r\n                          />\r\n                        );\r\n                      }}\r\n                    </Field>\r\n                  </Grid>\r\n\r\n                  {formikProps.errors.server && (\r\n                    <Grid item container xs={12} style={{ alignItems: 'center' }}>\r\n                      <Message root={{ style: { flexGrow: 1 } }}>\r\n                        {formikProps.errors.server}\r\n                      </Message>\r\n                    </Grid>\r\n                  )}\r\n\r\n                  <Grid item container xs={12} style={{ alignItems: 'center' }}>\r\n                    <Button\r\n                      disabled={loading}\r\n                      size=\"large\"\r\n                      type=\"submit\"\r\n                      variant={'contained'}\r\n                      color=\"secondary\"\r\n                      disableElevation\r\n                      fullWidth\r\n                    >\r\n                      {!loading && 'Submit'}\r\n                      {loading && <CircularProgress className={styles.progress} size={26} />}\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              </Form>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const KeyEntryFormModal: React.FC = () => {\r\n  const isEditModalOpened = useSelector(keysSelectors.isEditModalOpened);\r\n  const { toggleEditModal } = useContainerKeys();\r\n\r\n  const closeModal = useCallback(() => {\r\n    toggleEditModal({ isOpened: false });\r\n  }, [toggleEditModal]);\r\n\r\n  return (\r\n    <Dialog open={isEditModalOpened} onClose={closeModal}>\r\n      <KeyEntryForm onSubmit={closeModal} />\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsKeyEntryForm) => {\r\n  const { fetchCreateKey } = useContainerKeys();\r\n\r\n  const menuItems = useMemo(() => {\r\n    const options = Object.keys(unitOptions) as Array<keyof typeof unitOptions>;\r\n    return options.map((unit) => {\r\n      return {\r\n        id: unit,\r\n        label: unitOptions[unit],\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const { onSubmit } = props;\r\n\r\n  const handleSubmit = useCallback(\r\n    async (values: IKeyEntryFormValues, formikHelpers: FormikHelpers<IKeyEntryFormValues>) => {\r\n      const result = await fetchCreateKey({\r\n        name: values.name,\r\n        code: values.code,\r\n        rotation: values.rotatable === '1' ? `${values.rotation} ${values.unit}` : undefined,\r\n      });\r\n\r\n      const errorResult = result as { error: SerializedError };\r\n      if (errorResult.error) {\r\n        formikHelpers.setErrors({ server: errorResult.error.message });\r\n      } else if (onSubmit) {\r\n        onSubmit();\r\n      }\r\n    },\r\n    [onSubmit, fetchCreateKey],\r\n  );\r\n\r\n  const validate = useCallback((values: IKeyEntryFormValues) => {\r\n    const errors: FormikErrors<typeof values> = {};\r\n\r\n    if (!values.name || values.name.length === 0) {\r\n      errors.name = 'Name required!';\r\n    }\r\n\r\n    if (!values.code || values.code.length === 0) {\r\n      errors.code = 'Code required!';\r\n    }\r\n\r\n    if (values.rotatable === '1') {\r\n      if (!values.rotation && values.rotation.length === 0) {\r\n        errors.rotation = 'Rotation interval required!';\r\n      } else if (isNaN(parseInt(values.rotation))) {\r\n        errors.rotation = 'Rotation interval should be number!';\r\n      }\r\n    }\r\n\r\n    return errors;\r\n  }, []);\r\n\r\n  return {\r\n    menuItems,\r\n    handleSubmit,\r\n    fetchCreateKey,\r\n    validate,\r\n  };\r\n};\r\n\r\nconst digitMask = Inputmask({ regex: String.raw`[\\d,.]*` });\r\nconst codeMask = Inputmask({ regex: String.raw`[\\w]*` });\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  textfield: {\r\n    width: '100%',\r\n  },\r\n  progress: {\r\n    marginLeft: 20,\r\n  },\r\n  menu: {\r\n    width: 150,\r\n    marginLeft: 10,\r\n  },\r\n}));\r\n\r\nexport default KeyEntryForm;\r\n","import React, { useEffect } from 'react';\r\nimport { Container } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport KeysList from 'src/components/KeysList';\r\nimport { KeyPreviewModal } from 'src/components/KeyPreview';\r\nimport { useContainerKeys } from 'src/containers/Keys/hooks';\r\nimport { KeyEntryFormModal } from 'src/components/KeyEntryForm';\r\n\r\nexport const KeysPage: React.FC = () => {\r\n  const styles = useStyles();\r\n  useHooks();\r\n\r\n  return (\r\n    <Container className={styles.container}>\r\n      <KeysList />\r\n      <KeyPreviewModal />\r\n      <KeyEntryFormModal />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  container: {\r\n    display: 'flex',\r\n    minWidth: 0,\r\n    flexGrow: 1,\r\n    paddingTop: 16,\r\n  },\r\n}));\r\n\r\nconst useHooks = () => {\r\n  const { fetchKeysListWatch, resetList, routeWatcher, routeParser } = useContainerKeys();\r\n\r\n  useEffect(() => {\r\n    routeParser();\r\n  }, [routeParser]);\r\n\r\n  useEffect(() => {\r\n    routeWatcher();\r\n  }, [routeWatcher]);\r\n\r\n  useEffect(() => {\r\n    const req = fetchKeysListWatch();\r\n    return () => {\r\n      req.abort();\r\n    };\r\n  }, [fetchKeysListWatch]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      resetList();\r\n    };\r\n  }, [resetList]);\r\n};\r\n\r\nexport default KeysPage;\r\n","import { useCallback } from 'react';\r\nimport { IApiParamsAuthAccount, IApiParamsAuthRemove } from 'src/lib/api/auth/types';\r\nimport { useAppDispatch } from 'src/store';\r\nimport { actions as accountsActions } from './reducer';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport const useContainerAccounts = () => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const fetchCreateAccount = useCallback(async (params: IApiParamsAuthAccount) => {\r\n    return await dispatch(\r\n      accountsActions.fetchCreateAccount(params),\r\n    );\r\n  }, [dispatch]);\r\n\r\n  const fetchRemoveAccounts = useCallback(async (params: IApiParamsAuthRemove) => {\r\n    return await dispatch(\r\n      accountsActions.fetchRemoveAccounts(params)\r\n    )\r\n  }, [dispatch]);\r\n\r\n  const fetchAccountsList = useCallback(async () => {\r\n    return await dispatch(\r\n      accountsActions.fetchAccountsList()\r\n    );\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    fetchAccountsList,\r\n    fetchCreateAccount,\r\n    fetchRemoveAccounts,\r\n  }\r\n};\r\n","import React, { useCallback } from 'react';\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  Typography,\r\n  CardContent,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  CircularProgress,\r\n  makeStyles,\r\n  FormControlLabel,\r\n  Checkbox,\r\n} from '@material-ui/core';\r\nimport { Formik, FormikProps, Form, Field, FieldProps } from 'formik';\r\nimport { useContainerAccounts } from 'src/containers/Accounts/hooks';\r\n\r\nexport interface IAccountFormValues {\r\n  login: string;\r\n  password: string;\r\n  admin: string;\r\n}\r\n\r\nexport interface IPropsAccountForm {\r\n  onSubmit?:() => void;\r\n}\r\n\r\nconst initialValues: IAccountFormValues = {\r\n  login: '',\r\n  password: '',\r\n  admin: '0',\r\n};\r\n\r\nconst AccountForm: React.FC<IPropsAccountForm> = (props) => {\r\n  const styles = useStyles();\r\n  const { handleSubmit, validate } = useHooks(props);\r\n\r\n  return (\r\n    <Card style={{ width: 400 }}>\r\n      <CardHeader title={<Typography variant=\"h3\">Create new account</Typography>} />\r\n      <CardContent>\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validate={validate}\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {(formikProps: FormikProps<IAccountFormValues>) => {\r\n            const loading = formikProps.isSubmitting;\r\n            return (\r\n              <Form>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <Field name=\"login\">\r\n                      {(params: FieldProps<string>) => {\r\n                        const { field, meta } = params;\r\n                        return (\r\n                          <TextField\r\n                            fullWidth\r\n                            error={Boolean(meta.touched && meta.error)}\r\n                            label=\"Enter login\"\r\n                            variant=\"outlined\"\r\n                            {...field}\r\n                          />\r\n                        );\r\n                      }}\r\n                    </Field>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <Field name=\"password\">\r\n                      {(params: FieldProps<string>) => {\r\n                        const { field, meta } = params;\r\n                        return (\r\n                          <TextField\r\n                            fullWidth\r\n                            error={Boolean(meta.touched && meta.error)}\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            autoComplete={'off'}\r\n                            variant=\"outlined\"\r\n                            {...field}\r\n                          />\r\n                        );\r\n                      }}\r\n                    </Field>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <Field name=\"admin\">\r\n                      {(params: FieldProps<string>) => {\r\n                        const { field } = params;\r\n                        return (\r\n                          <FormControlLabel\r\n                            control={\r\n                              <Checkbox\r\n                                checked={field.value === '1'}\r\n                                onChange={(_, checked) => {\r\n                                  formikProps.setFieldValue('admin', checked ? '1' : '0');\r\n                                }}\r\n                                name=\"checkedB\"\r\n                                color=\"primary\"\r\n                              />\r\n                            }\r\n                            label=\"Administrator\"\r\n                          />\r\n                        );\r\n                      }}\r\n                    </Field>\r\n                  </Grid>\r\n                  <Grid item container xs={12} style={{ alignItems: 'center' }}>\r\n                    <Button\r\n                      disabled={loading}\r\n                      size=\"large\"\r\n                      type=\"submit\"\r\n                      variant={'contained'}\r\n                      color=\"secondary\"\r\n                      disableElevation\r\n                      fullWidth\r\n                    >\r\n                      {!loading && 'Submit'}\r\n                      {loading && <CircularProgress className={styles.progress} size={26} />}\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              </Form>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsAccountForm) => {\r\n  const { onSubmit } = props;\r\n  const { fetchCreateAccount } = useContainerAccounts();\r\n\r\nconst validate = useCallback(() => {}, []);\r\n\r\n  const handleSubmit = useCallback(async (values: IAccountFormValues) => {\r\n    await fetchCreateAccount({\r\n      isAdmin: values.admin === '1',\r\n      login: values.login,\r\n      password: values.password,\r\n    })\r\n    if (onSubmit) {\r\n      onSubmit();\r\n    }\r\n  }, [onSubmit, fetchCreateAccount]);\r\n\r\n  return {\r\n    validate,\r\n    handleSubmit,\r\n    fetchCreateAccount,\r\n  }\r\n}\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  progress: {\r\n    marginLeft: 20,\r\n  },\r\n}));\r\n\r\nexport default AccountForm;\r\n","import { createSelector } from 'reselect';\r\nimport { IStore } from 'src/reducer';\r\nimport { IStoreAccounts } from './types';\r\n\r\nexport const containerState = (state: IStore): IStoreAccounts => state.accounts;\r\nexport const createFetchSelector = createSelector(containerState, (state) => state.create);\r\nexport const accountsListSelector = createSelector(containerState, (state) => state.list);\r\n","import React, { useCallback } from 'react';\r\nimport { Card, CardContent, Typography, CardActions, Button, makeStyles } from '@material-ui/core';\r\nimport ApproveModal from '../ApproveModal';\r\nimport { useContainerAccounts } from 'src/containers/Accounts/hooks';\r\n\r\nexport interface IAccountData {\r\n  id: number;\r\n  login: string;\r\n}\r\n\r\nexport interface IPropsAccountItem {\r\n  data: IAccountData;\r\n}\r\n\r\nconst AccountItem: React.FC<IPropsAccountItem> = (props) => {\r\n  const styles = useStyles();\r\n  const { deleteAccount } = useHooks();\r\n\r\n  const { data } = props;\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Typography variant={'caption'} component={'div'}>\r\n          Account\r\n        </Typography>\r\n        <Typography variant={'h4'} component={'div'}>\r\n          {data.login}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions className={styles.actions}>\r\n        <ApproveModal\r\n          title={'Are you sure want to delete account?'}\r\n          content={'Every associated keys will be unavailable'}\r\n          onSubmit={() => deleteAccount(data.id)}\r\n        >\r\n          <Button size=\"small\">Remove account</Button>\r\n        </ApproveModal>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { fetchRemoveAccounts } = useContainerAccounts();\r\n  const deleteAccount = useCallback(\r\n    async (id: number) => {\r\n      await fetchRemoveAccounts({ ids: [id] });\r\n    },\r\n    [fetchRemoveAccounts],\r\n  );\r\n\r\n  return {\r\n    deleteAccount,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  actions: {\r\n    justifyContent: 'flex-end',\r\n  },\r\n}));\r\n\r\nexport default AccountItem;\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { Grid, Button, Dialog } from '@material-ui/core';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport AccountForm from 'src/components/AccountForm';\r\nimport { accountsListSelector } from 'src/containers/Accounts/selectors';\r\nimport { useSelector } from 'react-redux';\r\nimport AccountItem from '../AccountItem';\r\nimport { useContainerAccounts } from 'src/containers/Accounts/hooks';\r\n\r\nconst AccountsList: React.FC = () => {\r\n  const accountsData = useSelector(accountsListSelector);\r\n  const { isFormOpened, handleModalToggle } = useHooks();\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={isFormOpened} onClose={handleModalToggle}>\r\n        <AccountForm onSubmit={handleModalToggle} />\r\n      </Dialog>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<AddCircleOutlineIcon />}\r\n            onClick={handleModalToggle}\r\n          >\r\n            Add account\r\n          </Button>\r\n        </Grid>\r\n        <Grid container item spacing={2} xs={12}>\r\n          {accountsData.accounts.map((account) => {\r\n            return (\r\n              <Grid item key={account.id} xs={6}>\r\n                <AccountItem data={account} />\r\n              </Grid>\r\n            );\r\n          })}\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const [isFormOpened, toggleForm] = useState(false);\r\n  const { fetchAccountsList } = useContainerAccounts();\r\n\r\n  const handleModalToggle = useCallback(() => {\r\n    toggleForm(!isFormOpened);\r\n  }, [isFormOpened, toggleForm]);\r\n\r\n  useEffect(() => {\r\n    void fetchAccountsList();\r\n  }, [fetchAccountsList]);\r\n\r\n  return {\r\n    isFormOpened,\r\n    toggleForm,\r\n    handleModalToggle,\r\n  }\r\n};\r\n\r\nexport default AccountsList;\r\n","import React from 'react';\r\nimport { makeStyles, Container } from '@material-ui/core';\r\nimport AccountsList from 'src/components/AccountsList';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  container: {\r\n    paddingTop: 24,\r\n    paddingBottom: 24,\r\n  },\r\n}));\r\n\r\nconst AccountsPage: React.FC = () => {\r\n  const styles = useStyles();\r\n  return (\r\n    <Container className={styles.container}>\r\n      <AccountsList />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AccountsPage;\r\n","import { useCallback } from 'react';\r\nimport { useAppDispatch } from 'src/store';\r\nimport {\r\n  IApiParamsReposCreate,\r\n  IApiParamsReposList,\r\n  IApiParamsReposRemove,\r\n} from 'src/lib/api/repos/types';\r\nimport * as sessionSelectors from 'src/containers/Session/selectors';\r\nimport { actions as reposActions } from './reducer';\r\nimport * as reposSelectors from './selectors';\r\nimport { generatePassword } from 'src/lib/utils/generatePassword';\r\nimport { IApiPager } from 'src/lib/api/types';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport const useContainerRepos = () => {\r\n  const dispatch = useAppDispatch();\r\n  const pager = useSelector(reposSelectors.pagerSelector);\r\n  const search = useSelector(reposSelectors.searchSelector);\r\n  const accessToken = useSelector(sessionSelectors.tokenSelector);\r\n\r\n  const createNewRepo = useCallback(\r\n    (params: Omit<IApiParamsReposCreate, 'accessToken'>) => {\r\n      const token = generatePassword(64);\r\n      return dispatch(reposActions.fetchCreateRepo({ ...params, accessToken: token }));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const changePager = useCallback(\r\n    (params: Partial<IApiPager>) => {\r\n      return dispatch(reposActions.changePager(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const changeSearch = useCallback(\r\n    (search?: string) => {\r\n      return dispatch(reposActions.changeSearch({ search }));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const toggleEditModal = useCallback(\r\n    (opts: { isOpened: boolean }) => {\r\n      return dispatch(reposActions.toggleEditModal(opts));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const fetchListRepo = useCallback(\r\n    (params?: IApiParamsReposList) => {\r\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n      const refreshWhenTokenChanges = accessToken;\r\n      return dispatch(reposActions.fetchListRepo(params));\r\n    },\r\n    [dispatch, accessToken],\r\n  );\r\n\r\n  const fetchListRepoWatch = useCallback(() => {\r\n    const params = {\r\n      page: pager.page,\r\n      perPage: pager.perPage,\r\n      search,\r\n    };\r\n    return fetchListRepo(params);\r\n  }, [fetchListRepo, pager.page, pager.perPage, search]);\r\n\r\n  const deleteRepos = useCallback(\r\n    async (params: IApiParamsReposRemove) => {\r\n      await dispatch(reposActions.fetchRemoveRepos(params));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  return {\r\n    toggleEditModal,\r\n    createNewRepo,\r\n    deleteRepos,\r\n    fetchListRepo,\r\n    changePager,\r\n    fetchListRepoWatch,\r\n    changeSearch,\r\n  };\r\n};\r\n","import React, { useCallback, useRef } from 'react';\r\nimport {\r\n  CardContent,\r\n  Card,\r\n  Typography,\r\n  CardActions,\r\n  Button,\r\n  makeStyles,\r\n  Grid,\r\n  Chip,\r\n  Divider,\r\n  InputAdornment,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport ApproveModal from 'src/components/ApproveModal';\r\nimport { useContainerRepos } from 'src/containers/Repos/hooks';\r\nimport * as sessionSelectors from 'src/containers/Session/selectors';\r\nimport CopyBtn from '../CopyBtn';\r\nimport CodeFormat from '../CodeFormat';\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport interface IRepoItemData {\r\n  id: number;\r\n  name: string;\r\n  code: string;\r\n  accessToken: string;\r\n  entries: { name: string }[];\r\n}\r\n\r\nexport interface IPropsRepoItem {\r\n  data: IRepoItemData;\r\n}\r\n\r\nconst RepoItem: React.FC<IPropsRepoItem> = (props) => {\r\n  const { data } = props;\r\n  const styles = useStyles();\r\n  const host = useSelector(sessionSelectors.host);\r\n  const { deleteRepos, accessRef, handleFocus } = useHooks();\r\n  const targetUrl = `${host || ''}/repo/bunch/${data.code}`;\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <Typography variant={'caption'} component={'div'}>\r\n              Repository\r\n            </Typography>\r\n            <Typography variant={'h5'} component={'div'}>\r\n              {data.name}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Divider />\r\n          </Grid>\r\n          <Grid container item xs={12} spacing={1}>\r\n            <Grid item xs={12}>\r\n              <Typography variant={'caption'} component={'div'}>\r\n                Contained keys\r\n              </Typography>\r\n            </Grid>\r\n            {data.entries.map(({ name }, i) => {\r\n              return (\r\n                <Grid item key={i}>\r\n                  <Chip label={name} variant={'outlined'} />\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Divider />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Access token\"\r\n              variant=\"outlined\"\r\n              value={data.accessToken}\r\n              onFocus={handleFocus}\r\n              InputProps={{\r\n                inputRef: accessRef,\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <CopyBtn inputRef={accessRef} message={`URL has been copied!`} />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography>Key can be fetched via POST with access token.</Typography>\r\n            <CodeFormat>\r\n              {`curl -d '{ \"accessToken\":\"${data.accessToken}\" }' -H \"Content-Type: application/json\" -X POST ${targetUrl}`}\r\n            </CodeFormat>\r\n          </Grid>\r\n        </Grid>\r\n      </CardContent>\r\n      <CardActions className={styles.actions}>\r\n        <ApproveModal\r\n          title={'Are you sure want to delete repo?'}\r\n          onSubmit={() => deleteRepos({ ids: [data.id] })}\r\n        >\r\n          <Button size=\"small\">Remove</Button>\r\n        </ApproveModal>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { deleteRepos } = useContainerRepos();\r\n\r\n  const handleFocus: React.FocusEventHandler<HTMLInputElement> = useCallback((event) => {\r\n    event.target.select();\r\n  }, []);\r\n\r\n  const accessRef = useRef<HTMLInputElement>(null);\r\n\r\n  return {\r\n    accessRef,\r\n    deleteRepos,\r\n    handleFocus,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  actions: {\r\n    justifyContent: 'flex-end',\r\n  },\r\n  contentItems: {\r\n    display: 'flex',\r\n  },\r\n  contentItem: {\r\n    marginRight: 20,\r\n  },\r\n}));\r\n\r\nexport default RepoItem;\r\n","import React, { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Grid, Button, Box, Typography } from '@material-ui/core';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\n\r\nimport RepoItem from 'src/components/RepoItem';\r\nimport * as reposSelectors from 'src/containers/Repos/selectors';\r\nimport { useContainerRepos } from 'src/containers/Repos/hooks';\r\nimport PerPageSelect from '../PerPageSelect';\r\nimport { Pagination } from '@material-ui/lab';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport SearchInput from '../SearchInput';\r\n\r\nconst ReposList: React.FC = () => {\r\n  const styles = useStyles();\r\n  const { items, pager, pagerOptions } = useSelector(reposSelectors.reposListSelector);\r\n  const search = useSelector(reposSelectors.searchSelector);\r\n  const isEmpty = useSelector(reposSelectors.isEmptySelector);\r\n\r\n  const {\r\n    handleModalToggle,\r\n    handleChangePerPage,\r\n    handlePagerChange,\r\n    handleChangeSearch,\r\n  } = useHooks();\r\n\r\n  return (\r\n    <Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item spacing={2} container xs={12}>\r\n          <Grid item>\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<AddCircleOutlineIcon />}\r\n              onClick={handleModalToggle}\r\n            >\r\n              Add repository\r\n            </Button>\r\n          </Grid>\r\n          {!isEmpty && (\r\n            <Grid item>\r\n              <SearchInput\r\n                defaultValue={search}\r\n                onThrottledChange={handleChangeSearch}\r\n                placeholder={'Search by name...'}\r\n              />\r\n            </Grid>\r\n          )}\r\n        </Grid>\r\n        {items.length > 0 && (\r\n          <Grid item xs={12}>\r\n            <Grid container spacing={2}>\r\n              {items.map((repo) => {\r\n                return (\r\n                  <Grid item xs={6} key={repo.id}>\r\n                    <RepoItem data={repo} />\r\n                  </Grid>\r\n                );\r\n              })}\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n        {isEmpty && (\r\n          <Grid item xs={12} className={styles.noItems}>\r\n            <Typography variant=\"h5\">There is no repositories.</Typography>\r\n          </Grid>\r\n        )}\r\n        {pager.totalItems !== undefined && pager.totalItems > 0 && (\r\n          <Grid container item xs={12} spacing={2} alignItems=\"center\">\r\n            <Grid item>\r\n              <PerPageSelect\r\n                current={pager.perPage}\r\n                options={pagerOptions}\r\n                onSelect={handleChangePerPage}\r\n              />\r\n            </Grid>\r\n            <Grid item className={styles.pagerHolder}>\r\n              {pager.totalPages !== undefined && pager.totalPages > 1 && (\r\n                <Pagination\r\n                  onChange={handlePagerChange}\r\n                  count={pager.totalPages}\r\n                  page={pager.page}\r\n                />\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { changePager, changeSearch, toggleEditModal } = useContainerRepos();\r\n  const isEditFormOpened = useSelector(reposSelectors.isEditModalOpened);\r\n  const handleChangeSearch = useCallback(\r\n    (val: string) => {\r\n      return changeSearch(val);\r\n    },\r\n    [changeSearch],\r\n  );\r\n\r\n  const handleChangePerPage = useCallback(\r\n    (val: number) => {\r\n      return changePager({ perPage: val });\r\n    },\r\n    [changePager],\r\n  );\r\n\r\n  const handlePagerChange = useCallback(\r\n    (_: unknown, page: number) => {\r\n      return changePager({ page });\r\n    },\r\n    [changePager],\r\n  );\r\n\r\n  const handleModalToggle = useCallback(() => {\r\n    toggleEditModal({ isOpened: !isEditFormOpened });\r\n  }, [toggleEditModal, isEditFormOpened]);\r\n\r\n  return {\r\n    handleChangeSearch,\r\n    handleModalToggle,\r\n    handleChangePerPage,\r\n    handlePagerChange,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  pagerHolder: {\r\n    marginLeft: 'auto',\r\n  },\r\n  searchHolder: {\r\n    marginLeft: 'auto',\r\n  },\r\n  noItems: {\r\n    marginTop: 20,\r\n  },\r\n}));\r\n\r\nexport default ReposList;\r\n","import React, { useEffect, useState, ChangeEvent, useCallback } from 'react';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  Checkbox,\r\n  makeStyles,\r\n  Box,\r\n  Divider,\r\n  Grid,\r\n} from '@material-ui/core';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { IApiKeyEntry } from 'src/lib/api/types';\r\nimport { useContainerKeys } from 'src/containers/Keys/hooks';\r\nimport { IApiParamsKeysList, IApiResultKeysList } from 'src/lib/api/keys/list';\r\nimport { useAsyncEffect } from 'src/lib/utils/useAPIEffect';\r\nimport SearchInput from '../SearchInput';\r\n\r\nexport interface IPropsEntriesPicker {\r\n  pickedSet?: string[];\r\n  onUpdate?: (selected: IApiKeyEntry[]) => void;\r\n}\r\n\r\nconst EntriesPicker: React.FC<IPropsEntriesPicker> = (props) => {\r\n  const { picked, options, handleChangeItem, handleSearchChange } = useHooks(props);\r\n  const styles = useStyles();\r\n\r\n  return (\r\n    <Grid container spacing={1}>\r\n      <Grid item xs={12} className={styles.topDivider}><Divider /></Grid>\r\n      <Grid item xs={12} >\r\n        <SearchInput placeholder={'Select required keys...'} onThrottledChange={handleSearchChange} fullWidth />\r\n        <Box className={styles.scrollBar}>\r\n          <PerfectScrollbar>\r\n            <List>\r\n              {options.map((item) => {\r\n                return (\r\n                  <div key={item.id}>\r\n                    <ListItem key={item.id}>\r\n                      <ListItemIcon>\r\n                        <Checkbox\r\n                          edge=\"start\"\r\n                          size=\"small\"\r\n                          disableRipple\r\n                          checked={picked.includes(item.code)}\r\n                          onChange={(e: ChangeEvent<HTMLInputElement>) =>\r\n                            handleChangeItem(item.code, e.target.checked)\r\n                          }\r\n                        />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary={item.name} />\r\n                    </ListItem>\r\n                  </div>\r\n                );\r\n              })}\r\n            </List>\r\n          </PerfectScrollbar>\r\n        </Box>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsEntriesPicker) => {\r\n  const { pickedSet, onUpdate } = props;\r\n  const [picked, pickItems] = useState<string[]>([]);\r\n  const [options, setOptions] = useState<IApiKeyEntry[]>([]);\r\n  const [pickedDetails, changePickedDetails] = useState<{ [id: number]: IApiKeyEntry }>({});\r\n  const [searchParams, setParams] = useState<{\r\n    page?: number;\r\n    perPage?: number;\r\n    search?: string;\r\n  }>({});\r\n\r\n  useUpdatePickedSetFromProps(pickedSet, pickItems);\r\n  useGetPickedDetails(picked, pickedDetails, changePickedDetails);\r\n  useFetchOptions(searchParams, setOptions);\r\n\r\n  const handleChangeItem = useCallback(\r\n    (code: string, checked: boolean) => {\r\n      const newItems = checked ? picked.concat([code]) : picked.filter((item) => item !== code);\r\n\r\n      if (onUpdate) {\r\n        onUpdate(options.filter((item) => newItems.includes(item.code)));\r\n      }\r\n\r\n      pickItems(newItems);\r\n    },\r\n    [onUpdate, pickItems, options, picked],\r\n  );\r\n\r\n  const handleSearchChange = useCallback(\r\n    (val: string) => {\r\n      setParams((s) => ({ ...s, search: val }));\r\n    },\r\n    [setParams],\r\n  );\r\n\r\n  return {\r\n    options,\r\n    picked,\r\n    handleChangeItem,\r\n    handleSearchChange,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  scrollBar: {\r\n    height: 220,\r\n  },\r\n  topDivider: {\r\n    marginBottom: 5,\r\n  }\r\n}));\r\n\r\nconst useUpdatePickedSetFromProps = (\r\n  pickedSet: string[] | undefined,\r\n  pickItems: (p: string[]) => void,\r\n) => {\r\n  useEffect(() => {\r\n    if (pickedSet) {\r\n      pickItems(pickedSet);\r\n    }\r\n  }, [pickedSet, pickItems]);\r\n};\r\n\r\nconst useGetPickedDetails = (\r\n  picked: string[],\r\n  pickedDetails: Record<string, IApiKeyEntry>,\r\n  changePickedDetails: (p: Record<number, IApiKeyEntry>) => void,\r\n) => {\r\n  const { requestKeysByIds } = useContainerKeys();\r\n  useEffect(() => {\r\n    const newDetails = pickedDetails;\r\n    const requestTargets: string[] = [];\r\n\r\n    picked.forEach((id) => {\r\n      if (!newDetails[id]) {\r\n        requestTargets.push(id);\r\n      }\r\n    });\r\n    /*\r\n    if (requestTargets.length > 0) {\r\n      requestKeysByIds({ ids: requestTargets })\r\n        .then(({ items }) => {\r\n          items.forEach((item) => {\r\n            newDetails[item.id] = item;\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          throw err;\r\n        });\r\n      changePickedDetails(newDetails);\r\n    }\r\n    */\r\n  }, [picked, pickedDetails, changePickedDetails, requestKeysByIds]);\r\n};\r\n\r\nconst useFetchOptions = (\r\n  params: IApiParamsKeysList,\r\n  setOptions: (opts: IApiKeyEntry[]) => void,\r\n) => {\r\n  const { requestKeysList } = useContainerKeys();\r\n\r\n  const fetchList = useCallback(() => {\r\n    return requestKeysList(params);\r\n  }, [params, requestKeysList]);\r\n\r\n  const onComplete = useCallback(\r\n    (res: IApiResultKeysList) => {\r\n      setOptions(res.items);\r\n    },\r\n    [setOptions],\r\n  );\r\n\r\n  useAsyncEffect(fetchList, onComplete);\r\n};\r\n\r\nexport default EntriesPicker;\r\n","import { useEffect } from 'react';\r\n\r\nexport const useAsyncEffect = <R, E extends Error>(\r\n  func: () => Promise<R>,\r\n  onSuccess: (result: R) => void,\r\n  onError?: (error: E) => void,\r\n): void => {\r\n  useEffect(() => {\r\n    let isUnmounted = false;\r\n\r\n    func().then((result: R) => {\r\n      !isUnmounted && onSuccess(result);\r\n    }).catch((err: E) => {\r\n      if (!isUnmounted && onError) {\r\n        onError(err);\r\n      } else if (!isUnmounted) {\r\n        throw err;\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      isUnmounted = true;\r\n    }\r\n  }, [func, onSuccess, onError]);\r\n};\r\n","import React, { useCallback } from 'react';\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  Typography,\r\n  CardContent,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  CircularProgress,\r\n  makeStyles,\r\n  Dialog,\r\n} from '@material-ui/core';\r\nimport { Formik, FormikProps, Form, Field, FieldProps, FormikErrors, FormikHelpers } from 'formik';\r\n\r\nimport EntriesPicker from 'src/components/EntriesPicker';\r\nimport { useContainerRepos } from 'src/containers/Repos/hooks';\r\nimport * as reposSelectors from 'src/containers/Repos/selectors';\r\nimport { SerializedError } from '@reduxjs/toolkit';\r\nimport Message from '../Message';\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport interface IRepositoryFormValues {\r\n  code: string;\r\n  entries: string[];\r\n  server?: string;\r\n}\r\n\r\nexport interface IPropsRepositoryForm {\r\n  onSubmit?: () => void;\r\n}\r\n\r\nconst validate = (values: IRepositoryFormValues) => {\r\n  const { code, entries } = values;\r\n  const errors: FormikErrors<typeof values> = {};\r\n\r\n  if (!code || code.length === 0) {\r\n    errors.code = 'Code required!';\r\n  }\r\n\r\n  if (entries.length === 0) {\r\n    errors.entries = 'Choose at least one entry';\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nconst RepositoryForm: React.FC<IPropsRepositoryForm> = (props) => {\r\n  const styles = useStyles();\r\n  const { handleSubmit } = useHooks(props);\r\n\r\n  return (\r\n    <>\r\n      <Card style={{ width: 400 }}>\r\n        <CardHeader title={<Typography variant=\"h3\">Create new repository</Typography>} />\r\n        <CardContent>\r\n          <Formik\r\n            initialValues={{\r\n              code: '',\r\n              entries: [],\r\n            }}\r\n            validate={validate}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            {(formikProps: FormikProps<IRepositoryFormValues>) => {\r\n              const loading = formikProps.isSubmitting;\r\n              return (\r\n                <Form>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                      <Field name=\"code\">\r\n                        {(params: FieldProps<string>) => {\r\n                          const { field, meta } = params;\r\n                          return (\r\n                            <TextField\r\n                              fullWidth\r\n                              error={Boolean(meta.touched && meta.error)}\r\n                              label=\"Choose unique code\"\r\n                              variant=\"outlined\"\r\n                              {...field}\r\n                            />\r\n                          );\r\n                        }}\r\n                      </Field>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                      <Field name=\"entries\">\r\n                        {(params: FieldProps<string[]>) => {\r\n                          const { field, meta } = params;\r\n                          return (\r\n                            <>\r\n                              <EntriesPicker\r\n                                onUpdate={(items) => {\r\n                                  formikProps.setFieldValue(\r\n                                    'entries',\r\n                                    items.map(({ code }) => code),\r\n                                  );\r\n                                }}\r\n                                pickedSet={field.value}\r\n                              />\r\n                              {meta.touched && meta.error && (\r\n                                <Typography\r\n                                  variant={'caption'}\r\n                                  color={'error'}\r\n                                  className={styles.keyError}\r\n                                >\r\n                                  {meta.error}\r\n                                </Typography>\r\n                              )}\r\n                            </>\r\n                          );\r\n                        }}\r\n                      </Field>\r\n                    </Grid>\r\n                    {formikProps.errors.server && (\r\n                      <Grid item container xs={12} style={{ alignItems: 'center' }}>\r\n                        <Message>{formikProps.errors.server}</Message>\r\n                      </Grid>\r\n                    )}\r\n                    <Grid item container xs={12} style={{ alignItems: 'center' }}>\r\n                      <Button\r\n                        disabled={loading}\r\n                        size=\"large\"\r\n                        type=\"submit\"\r\n                        variant={'contained'}\r\n                        color=\"secondary\"\r\n                        disableElevation\r\n                        fullWidth\r\n                      >\r\n                        {!loading && 'Submit'}\r\n                        {loading && <CircularProgress className={styles.progress} size={26} />}\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Form>\r\n              );\r\n            }}\r\n          </Formik>\r\n        </CardContent>\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const RepositoryFormModal: React.FC = () => {\r\n  const { toggleEditModal } = useContainerRepos();\r\n  const isRepoEditModalOpened = useSelector(reposSelectors.isEditModalOpened);\r\n  const closeModal = useCallback(() => {\r\n    toggleEditModal({ isOpened: false });\r\n  }, [toggleEditModal]);\r\n\r\n  return (\r\n    <Dialog open={isRepoEditModalOpened} onClose={closeModal}>\r\n      <RepositoryForm onSubmit={closeModal} />\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst useHooks = (props: IPropsRepositoryForm) => {\r\n  const { onSubmit } = props;\r\n  const { createNewRepo } = useContainerRepos();\r\n\r\n  const handleSubmit = useCallback(\r\n    async (values: IRepositoryFormValues, formikHelpers: FormikHelpers<IRepositoryFormValues>) => {\r\n      const result = await createNewRepo({\r\n        code: values.code,\r\n        name: values.code,\r\n        description: values.code,\r\n        keys: values.entries,\r\n      });\r\n      const error = (result as { error: SerializedError }).error;\r\n\r\n      if (!error && onSubmit) {\r\n        onSubmit();\r\n      } else {\r\n        formikHelpers.setErrors({ server: error.message });\r\n      }\r\n    },\r\n    [createNewRepo, onSubmit],\r\n  );\r\n\r\n  return { handleSubmit };\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  progress: {\r\n    marginLeft: 20,\r\n  },\r\n  keyTitle: {\r\n    marginTop: 10,\r\n    marginBotton: 10,\r\n    paddingLeft: 10,\r\n  },\r\n  keyError: {\r\n    paddingLeft: 10,\r\n  },\r\n}));\r\n\r\nexport default RepositoryForm;\r\n","import React, { useEffect } from 'react';\r\nimport { Container } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ReposList from 'src/components/ReposList';\r\nimport { useContainerRepos } from 'src/containers/Repos/hooks';\r\nimport { RepositoryFormModal } from 'src/components/RepositoryForm';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  container: {\r\n    paddingTop: 16,\r\n    paddingBottom: 24,\r\n  },\r\n}));\r\n\r\nexport const ReposPage: React.FC = () => {\r\n  const styles = useStyles();\r\n  useHooks();\r\n\r\n  return (\r\n    <Container className={styles.container}>\r\n      <ReposList />\r\n      <RepositoryFormModal />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { fetchListRepoWatch } = useContainerRepos();\r\n\r\n  useEffect(() => {\r\n    const req = fetchListRepoWatch();\r\n    return () => {\r\n      req.abort();\r\n    };\r\n  }, [fetchListRepoWatch]);\r\n};\r\nexport default ReposPage;\r\n","import { createSelector } from 'reselect';\r\nimport { IStore } from 'src/reducer';\r\nimport { IStoreStorage } from './types';\r\n\r\nexport const containerState = (state: IStore): IStoreStorage => state.storage;\r\nexport const storageItems = createSelector(containerState, (state) => state.items);\r\nexport const storagePager = createSelector(containerState, (state) => state.pager);\r\nexport const storageFilter = createSelector(containerState, (state) => state.filter);\r\nexport const storagePagerOptions = createSelector(containerState, (state) => state.pagerOptions);\r\n\r\nexport const isEmptySelector = createSelector(storageFilter, storageItems, (filter, items) => {\r\n  const { entryName } = filter;\r\n  return (!entryName || entryName.length === 0) && items.length === 0;\r\n});\r\n","import React, { useCallback } from 'react';\r\nimport {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Grid,\r\n} from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton/IconButton';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport { IApiStorageItem } from 'src/lib/api/types';\r\nimport moment from 'moment';\r\nimport { useContainerPreviewKey } from 'src/containers/KeyPreview/hooks';\r\n\r\nexport interface IStorageTableItem {\r\n  expUnix: number;\r\n  activateUnix: number;\r\n  entry: {\r\n    name: string;\r\n    archivedAt: number | null;\r\n  };\r\n}\r\n\r\nexport interface IPropsStorageTable {\r\n  items: IApiStorageItem[];\r\n}\r\n\r\nconst StorageTable: React.FC<IPropsStorageTable> = (props) => {\r\n  const { items } = props;\r\n  const { handleOpenKeyPreview } = useHooks();\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Id</TableCell>\r\n            <TableCell>Type</TableCell>\r\n            <TableCell>Algorithm</TableCell>\r\n            <TableCell>Entry name</TableCell>\r\n            <TableCell>Entry code</TableCell>\r\n            <TableCell>Status</TableCell>\r\n            <TableCell>Period</TableCell>\r\n            <TableCell align=\"center\">\r\n              Actions\r\n            </TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {items.map((item) => {\r\n            const now = moment();\r\n            const expMoment = moment.unix(item.expUnix);\r\n            const activateMoment = moment.unix(item.activateUnix);\r\n            const dateFormat = 'LL';\r\n\r\n            let currentStatus = '';\r\n\r\n            if (item.entry.archivedAt !== null) {\r\n              currentStatus = 'Archived';\r\n            } else if (Boolean(item.expUnix) && expMoment.isBefore(now)) {\r\n              currentStatus = 'Expired';\r\n            } else if (activateMoment.isAfter(now)) {\r\n              currentStatus = 'Awaiting';\r\n            } else {\r\n              currentStatus = 'Active';\r\n            }\r\n\r\n            return (\r\n              <TableRow key={item.key.kid}>\r\n                <TableCell>{item.key.kid}</TableCell>\r\n                <TableCell>{item.key.kty}</TableCell>\r\n                <TableCell>{item.key.alg}</TableCell>\r\n                <TableCell>{item.entry.name}</TableCell>\r\n                <TableCell>{item.entry.code}</TableCell>\r\n                <TableCell>{currentStatus}</TableCell>\r\n                <TableCell>\r\n                  {item.expUnix\r\n                    ? `${activateMoment.format(dateFormat)} - ${expMoment.format(dateFormat)}`\r\n                    : `Non-rotatable`}\r\n                </TableCell>\r\n                <TableCell align=\"center\" >\r\n                  <Grid container spacing={2} justify=\"center\">\r\n                    <Grid item>\r\n                      <IconButton size=\"small\" onClick={() => handleOpenKeyPreview(item.key.kid)}>\r\n                        <VisibilityIcon />\r\n                      </IconButton>\r\n                    </Grid>\r\n                  </Grid>\r\n                </TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { openKeyPreview } = useContainerPreviewKey();\r\n\r\n  const handleOpenKeyPreview = useCallback(async (id: string) => {\r\n    await openKeyPreview({ id: parseInt(id) }, { format: 'jwk', privacy: 'public' });\r\n  }, [openKeyPreview]);\r\n\r\n  return {\r\n    handleOpenKeyPreview,\r\n  }\r\n}\r\n\r\nexport default StorageTable;\r\n","import { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { IApiParamsKeysStorage } from 'src/lib/api/keys/storage';\r\nimport * as sessionSelectors from 'src/containers/Session/selectors';\r\nimport { IApiPager } from 'src/lib/api/types';\r\nimport { useAppDispatch } from 'src/store';\r\nimport { actions as storageActions } from './reducer';\r\nimport * as storageSelectors from './selectors';\r\nimport { IStoreStorage } from './types';\r\n\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nexport const useContainerStorage = () => {\r\n  const dispatch = useAppDispatch();\r\n  const storagePager = useSelector(storageSelectors.storagePager);\r\n  const storageFilter = useSelector(storageSelectors.storageFilter);\r\n  const accessToken = useSelector(sessionSelectors.tokenSelector);\r\n\r\n  const changePager = useCallback(\r\n    (pager: Partial<IApiPager>) => {\r\n      return dispatch(storageActions.changePager(pager));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const changeFilter = useCallback(\r\n    (filter: Partial<IStoreStorage['filter']>) => {\r\n      return dispatch(storageActions.changeFilter(filter));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const fetchStorageItems = useCallback(\r\n    (params: IApiParamsKeysStorage) => {\r\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n      const refreshWhenTokenChanges = accessToken;\r\n      return dispatch(storageActions.fetchStorageItems(params));\r\n    },\r\n    [dispatch, accessToken],\r\n  );\r\n\r\n  const fetchStorageItemsWatcher = useCallback(() => {\r\n    const params = {\r\n      page: storagePager.page,\r\n      perPage: storagePager.perPage,\r\n      search: storageFilter.entryName,\r\n    };\r\n    return fetchStorageItems(params);\r\n  }, [fetchStorageItems, storagePager.page, storagePager.perPage, storageFilter]);\r\n\r\n  return {\r\n    changePager,\r\n    changeFilter,\r\n    fetchStorageItems,\r\n    fetchStorageItemsWatcher,\r\n  };\r\n};\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { TablePagination, Typography } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport * as storageSelectors from 'src/containers/Storage/selectors';\r\nimport StorageTable from 'src/components/StorageTable';\r\nimport { useContainerStorage } from 'src/containers/Storage/hooks';\r\nimport SearchInput from 'src/components/SearchInput';\r\n\r\nconst StorageList: React.FC = () => {\r\n  const storageItems = useSelector(storageSelectors.storageItems);\r\n  const storageFilter = useSelector(storageSelectors.storageFilter);\r\n  const pagerOptions = useSelector(storageSelectors.storagePagerOptions);\r\n  const isEmpty = useSelector(storageSelectors.isEmptySelector);\r\n\r\n  const {\r\n    targetPage,\r\n    storagePager,\r\n    totalItems,\r\n    handlePagerChange,\r\n    handleChangePerPage,\r\n    handleChangeFilterEntryName,\r\n  } = useHooks();\r\n\r\n  if (totalItems === undefined) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      { !isEmpty &&\r\n        <Grid container item xs={12}>\r\n          <Grid item>\r\n            <SearchInput\r\n              placeholder={'Search by entry name'}\r\n              defaultValue={storageFilter.entryName}\r\n              onThrottledChange={handleChangeFilterEntryName}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      }\r\n      { isEmpty &&\r\n        <Grid item xs={12}>\r\n          <Typography variant=\"h5\">Storage is empty.</Typography>\r\n        </Grid>\r\n      }\r\n      {totalItems > 0 && (\r\n        <Grid item xs={12}>\r\n          <StorageTable items={storageItems} />\r\n        </Grid>\r\n      )}\r\n      {targetPage !== undefined && totalItems > 0 && (\r\n        <Grid item xs={12}>\r\n          <TablePagination\r\n            component=\"div\"\r\n            count={totalItems}\r\n            page={targetPage - 1}\r\n            rowsPerPageOptions={pagerOptions}\r\n            onChangePage={handlePagerChange}\r\n            rowsPerPage={storagePager.perPage}\r\n            onChangeRowsPerPage={handleChangePerPage}\r\n          />\r\n        </Grid>\r\n      )}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { changePager, changeFilter } = useContainerStorage();\r\n  const storagePager = useSelector(storageSelectors.storagePager);\r\n  const { totalItems, perPage, page } = storagePager;\r\n\r\n  const targetPage = useMemo(() => {\r\n    if (totalItems === undefined) {\r\n      return undefined;\r\n    }\r\n    const maxPage = Math.ceil(totalItems / perPage);\r\n    return Math.min(maxPage, page);\r\n  }, [totalItems, perPage, page]);\r\n\r\n  const handleChangeFilterEntryName = useCallback(\r\n    (val: string) => {\r\n      return changeFilter({ entryName: val });\r\n    },\r\n    [changeFilter],\r\n  );\r\n\r\n  const handlePagerChange = useCallback(\r\n    (_event: React.MouseEvent<HTMLButtonElement> | null, value: number) => {\r\n      return changePager({ page: value + 1 });\r\n    },\r\n    [changePager],\r\n  );\r\n\r\n  const handleChangePerPage = useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n      const val = parseInt(event.target.value, 10);\r\n      return changePager({ perPage: val });\r\n    },\r\n    [changePager],\r\n  );\r\n\r\n  return {\r\n    targetPage,\r\n    storagePager,\r\n    totalItems,\r\n    handlePagerChange,\r\n    handleChangeFilterEntryName,\r\n    handleChangePerPage,\r\n  };\r\n};\r\n\r\nexport default StorageList;\r\n","import React, { useEffect } from 'react';\r\nimport { Container } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport StorageList from 'src/components/StorageList';\r\nimport { KeyPreviewModal } from 'src/components/KeyPreview';\r\nimport { useContainerStorage } from 'src/containers/Storage/hooks';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  container: {\r\n    paddingTop: 24,\r\n    paddingBottom: 24,\r\n  }\r\n}));\r\n\r\nexport const StoragePage: React.FC = () => {\r\n  const styles = useStyles();\r\n  useHooks();\r\n\r\n  return (\r\n    <Container className={styles.container}>\r\n      <StorageList />\r\n      <KeyPreviewModal />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { fetchStorageItemsWatcher } = useContainerStorage();\r\n\r\n  useEffect(() => {\r\n    const req = fetchStorageItemsWatcher();\r\n\r\n    return () => {\r\n      req.abort();\r\n    };\r\n  }, [fetchStorageItemsWatcher]);\r\n}\r\n\r\nexport default StoragePage;\r\n","import React, { useEffect } from 'react';\r\nimport { Container } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport KeysList from 'src/components/KeysList';\r\nimport { KeyPreviewModal } from 'src/components/KeyPreview';\r\nimport { useContainerKeys } from 'src/containers/Keys/hooks';\r\n\r\nexport const ArchivePage: React.FC = () => {\r\n  const styles = useStyles();\r\n  useHooks();\r\n\r\n  return (\r\n    <Container className={styles.container}>\r\n      <KeysList archive />\r\n      <KeyPreviewModal />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  container: {\r\n    display: 'flex',\r\n    minWidth: 0,\r\n    flexGrow: 1,\r\n    paddingTop: 16,\r\n  },\r\n}));\r\n\r\nconst useHooks = () => {\r\n  const { fetchArchiveListWatch, resetList, routeParser, routeWatcher } = useContainerKeys();\r\n\r\n  useEffect(() => {\r\n    routeParser();\r\n  }, [routeParser]);\r\n\r\n  useEffect(() => {\r\n    routeWatcher();\r\n  }, [routeWatcher]);\r\n\r\n  useEffect(() => {\r\n    const req = fetchArchiveListWatch();\r\n    return () => {\r\n      req.abort();\r\n    };\r\n  }, [fetchArchiveListWatch]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      resetList();\r\n    };\r\n  }, [resetList]);\r\n};\r\n\r\nexport default ArchivePage;\r\n","/* eslint-disable react/display-name */\r\nimport React from 'react';\r\nimport { RouteConfig } from 'react-router-config';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { ROUTES } from 'src/constants/routes';\r\nimport AuthLayout from 'src/layouts/AuthLayout';\r\nimport DashboardLayout from 'src/layouts/DashboardLayout';\r\nimport LoginForm from 'src/components/LoginForm';\r\nimport KeysPage from 'src/pages/KeysPage';\r\nimport AccountsPage from 'src/pages/AccountsPage';\r\nimport { ReposPage } from 'src/pages/ReposPage';\r\nimport { StoragePage } from 'src/pages/StoragePage';\r\nimport { ArchivePage } from './pages/ArchivePage';\r\n\r\nconst routes: RouteConfig[] = [\r\n  {\r\n    path: '/',\r\n    exact: true,\r\n    component: (): React.ReactElement => <Redirect to={ROUTES.KEYS} />,\r\n  },\r\n  {\r\n    path: ROUTES.AUTH,\r\n    component: AuthLayout,\r\n    routes: [\r\n      {\r\n        path: ROUTES.AUTH_LOGIN,\r\n        exact: true,\r\n        component: LoginForm,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    path: ROUTES.DASHBOARD,\r\n    component: DashboardLayout,\r\n    routes: [\r\n      {\r\n        path: ROUTES.KEYS,\r\n        component: KeysPage,\r\n      },\r\n      {\r\n        path: ROUTES.ACCOUNTS,\r\n        component: AccountsPage,\r\n      },\r\n      {\r\n        path: ROUTES.REPOS,\r\n        component: ReposPage,\r\n      },\r\n      {\r\n        path: ROUTES.STORAGE,\r\n        component: StoragePage,\r\n      },\r\n      {\r\n        path: ROUTES.ARCHIVE,\r\n        component: ArchivePage,\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import styled from 'styled-components';\r\n\r\nexport const Wrap = styled.div`\r\n  width: 100vw;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-sizing: border-box;\r\n`;\r\n","import React, { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport { isAlreadyFetched } from 'src/containers/Session/selectors';\r\nimport { useContainerSession } from 'src/containers/Session/hooks';\r\nimport * as S from './styles';\r\n\r\nconst StartScreen: React.FC = (props) => {\r\n  const isComplete = useSelector(isAlreadyFetched);\r\n  useHooks();\r\n\r\n  if (isComplete) {\r\n    return <>{props.children}</>;\r\n  }\r\n\r\n  return (\r\n    <S.Wrap>\r\n      <CircularProgress size={60} />\r\n    </S.Wrap>\r\n  );\r\n};\r\n\r\nconst useHooks = () => {\r\n  const { fetchMe } = useContainerSession();\r\n\r\n  useEffect(() => {\r\n    const req = fetchMe();\r\n    return () => {\r\n      req.abort();\r\n    }\r\n  }, [fetchMe]);\r\n};\r\n\r\nexport default StartScreen;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { useLocation, Redirect } from 'react-router-dom';\r\n\r\nimport { IStore } from 'src/reducer';\r\nimport * as userStateSelectors from 'src/containers/Session/selectors';\r\n\r\nexport interface IPropsAuthGuard {}\r\n\r\nexport interface IConnectAuthGuard {\r\n  isUserAuthorized: boolean;\r\n}\r\n\r\nconst AuthGuard: React.FC<IPropsAuthGuard> = (props) => {\r\n  const location = useLocation();\r\n\r\n  const storeData = useSelector<IStore, IConnectAuthGuard>(\r\n    createStructuredSelector({\r\n      isUserAuthorized: userStateSelectors.isUserAuthorized,\r\n    }),\r\n  );\r\n\r\n  if (storeData.isUserAuthorized && location.pathname === '/auth/login') {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  if (!storeData.isUserAuthorized && location.pathname !== '/auth/login') {\r\n    return <Redirect to=\"/auth/login\" />;\r\n  }\r\n\r\n  return <>{props.children}</>;\r\n};\r\n\r\nexport default AuthGuard;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider as StoreProvider } from 'react-redux';\r\nimport { ThemeProvider } from '@material-ui/core';\r\nimport { renderRoutes } from 'react-router-config';\r\nimport { Router } from 'react-router-dom';\r\nimport { createBrowserHistory } from 'history';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport 'src/theme/global.css';\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\n\r\nimport { store } from 'src/store';\r\nimport theme from 'src/theme';\r\nimport routes from 'src/routes';\r\nimport StartScreen from './components/StartScreen';\r\nimport AuthGuard from './components/AuthGuard';\r\n\r\nconst targetNode = document.getElementById('root');\r\n\r\nif (targetNode) {\r\n  const history = createBrowserHistory();\r\n  ReactDOM.render(\r\n    <StoreProvider store={store}>\r\n      <CssBaseline />\r\n      <ThemeProvider theme={theme}>\r\n        <Router history={history}>\r\n          <StartScreen>\r\n            <AuthGuard>{renderRoutes(routes)}</AuthGuard>\r\n          </StartScreen>\r\n        </Router>\r\n      </ThemeProvider>\r\n    </StoreProvider>,\r\n    targetNode,\r\n  );\r\n}\r\n"],"sourceRoot":""}